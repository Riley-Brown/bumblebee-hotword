(this["webpackJsonpbumblebee-basic-example"]=this["webpackJsonpbumblebee-basic-example"]||[]).push([[0],[,,,,,,,,,function(t,e,i){var a=i(2),n=i(3),o=i(18),s=i(20),r=i(4),c=i(21),l=i(23),u=i(24),h=i(25),d=i(26),f=function(t){"use strict";function e(){var t;return a(this,e),(t=o(this,s(e).call(this))).hotword=null,t.hotwords={},t.setMicVolume(1),t.setMuted(!1),t.setSensitivity(.5),t.setWorkersPath("/"),t.setVoiceProcessor(h),t._detectionCallback=t.detectionCallback.bind(r(t)),t._errorCallback=t.errorCallback.bind(r(t)),t._audioProcessCallback=t.audioProcessCallback.bind(r(t)),t._audioAnalyserCallback=t.audioAnalyserCallback.bind(r(t)),t}return c(e,t),n(e,[{key:"setVoiceProcessor",value:function(t){this.webVoiceProcessor=t}},{key:"addHotword",value:function(t,e,i){this.hotwords[t]={data:e,sensitivity:i||this.defaultSensitivity}}},{key:"setHotword",value:function(t){if(null===t||""===t)this.hotword=null;else{if(!(Object.keys(this.hotwords).indexOf(t)>-1))throw new Error("invalid hotword");this.hotword=t}}},{key:"setSensitivity",value:function(t){this.defaultSensitivity=t}},{key:"stop",value:function(){this.porcupineManager.stop(),this.started=!1}},{key:"setWorkersPath",value:function(t){this.webWorkersPath=t}},{key:"detectionCallback",value:function(t){t&&(console.log("bumblebee keyword",t),null===this.hotword||t===this.hotword?this.emit("hotword",t):console.log("wrong hotword:",t))}},{key:"errorCallback",value:function(t){this.emit("error",t)}},{key:"audioProcessCallback",value:function(t,e){this.emit("data",t,e)}},{key:"audioAnalyserCallback",value:function(t,e){this.gainNode=e,this.emit("analyser",t)}},{key:"start",value:function(){if(!this.started){this.started=!0,this.porcupineManager=u(this.webVoiceProcessor,this.webWorkersPath+"/porcupine_worker.js",this.webWorkersPath+"/downsampling_worker.js");var t={},e=[];for(var i in this.hotwords){var a=this.hotwords[i];t[i]=a.data,e.push(a.sensitivity)}this.porcupineManager.start(t,new Float32Array(e),this._gain,this._detectionCallback,this._errorCallback,this._audioProcessCallback,this._audioAnalyserCallback)}}},{key:"setMuted",value:function(t){this.muted=t,this.gainNode&&(t?(this._gain=this.gainNode.gain.value,this.gainNode.gain.value=0):this.gainNode.gain.value=this._gain||1)}},{key:"setMicVolume",value:function(t){this._gain=t,this.gainNode&&(this.gainNode.gain.value=t)}}]),e}(l);t.exports=f,t.exports.SpectrumAnalyser=d},,,function(t,e,i){t.exports=i(28)},,,,,function(t,e,i){},,,,,,,function(t,e){t.exports=function(t,e,i){var a;return{start:function(n,o,s,r,c,l,u){(a=new Worker(e)).postMessage({command:"init",keywordIDs:n,sensitivities:o}),a.onmessage=function(t){r(t.data.keyword)},t.start([this],s,i,c,l,u)},processFrame:function(t){a.postMessage({command:"process",inputFrame:t})},stop:function(){t.stop(),a.postMessage({command:"release"})}}}},function(t,e){var i,a,n,o,s,r,c,l=!1;t.exports={start:function(t,e,u,h,d,f){i||navigator.mediaDevices.getUserMedia({audio:!0}).then((function(h){o=new(window.AudioContext||window.webkitAudioContext),s=o.createMediaStreamSource(h),r=h,c=o.createGain(),s.connect(c),c.gain.value=e||1,(a=o.createScriptProcessor(4096,1,1)).onaudioprocess=function(t){if(l){var e=t.inputBuffer.getChannelData(0);i.postMessage({command:"process",inputFrame:e})}},c.connect(a),a.connect(o.destination),i=new Worker(u);var w=s.context.sampleRate;i.postMessage({command:"init",inputSampleRate:w}),i.onmessage=function(e){t.forEach((function(t){t.processFrame(e.data)})),d&&d(e.data)},n=o.createAnalyser(),c.connect(n),f(n,c)})).catch(h),l=!0},stop:function(){l=!1,n&&n.disconnect(),a&&a.disconnect(),c&&c.disconnect(),r&&r.getTracks()[0].stop(),o&&o.close(),i.postMessage({command:"reset"}),i=null}}},function(t,e,i){var a=i(2),n=i(3),o=function(){"use strict";function t(e,i){a(this,t),this.analyser=e,this.canvas=i,this.drawing=!1,e.fftSize=2048,this.bufferLength=e.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.ctx=i.getContext("2d"),this.setColors("#fff","#000"),this.ctx.lineWidth=1.5,this._draw=this.draw.bind(this)}return n(t,[{key:"setColors",value:function(t,e){t&&(this.ctx.strokeStyle=t),e&&(this.bgColor=e)}},{key:"draw",value:function(){var t=this.canvas,e=this.bufferLength,i=this.ctx;this.analyser.getByteTimeDomainData(this.dataArray),this.bgColor?(i.fillStyle=this.bgColor,i.fillRect(0,0,t.width,t.height)):i.clearRect(0,0,t.width,t.height),this.muted&&(i.fillStyle=i.strokeStyle,i.font="14px Arial",i.fillText("MUTED",t.width/2-25,t.height/2-10)),i.beginPath();for(var a=1*t.width/e,n=0,o=0;o<e;o++){var s=this.dataArray[o]/128*t.height/2;0===o?i.moveTo(n,s):i.lineTo(n,s),n+=a}i.lineTo(t.width,t.height/2),i.stroke(),this.drawing&&requestAnimationFrame(this._draw)}},{key:"start",value:function(){this.drawing=!0,this.draw()}},{key:"stop",value:function(){this.drawing=!1}},{key:"setMuted",value:function(t){this.muted=t}}]),t}();t.exports=o},function(t,e){t.exports=new Uint8Array([140,20,139,111,75,233,106,137,144,225,192,133,238,96,238,92,238,77,124,58,215,21,175,49,127,74,52,213,106,111,236,227,15,116,168,49,25,247,70,183,184,63,166,55,113,59,20,242,220,165,61,139,6,132,219,145,71,186,73,108,204,114,81,20,173,53,233,81,39,112,154,74,124,38,52,44,103,80,171,64,246,219,196,149,250,86,199,18,85,196,46,148])},function(t,e,i){"use strict";i.r(e);var a=i(0),n=i.n(a),o=i(5),s=i.n(o),r=(i(17),i(6)),c=i(7),l=i(10),u=i(8),h=i(11),d=i(9),f=new(i.n(d).a);f.setSensitivity(.5),f.setWorkersPath("./bumblebee-workers"),f.addHotword("bumblebee",i(27)),f.setHotword("bumblebee");var w=function(t){function e(){var t;Object(r.a)(this,e),(t=Object(l.a)(this,Object(u.a)(e).call(this))).state={words:[],started:!1};var i=new Audio("sounds/bumblebee-on.mp3");return f.on("hotword",(function(e){i.play();var a=t.state.words;a.push(e),t.setState({words:a})})),t}return Object(h.a)(e,t),Object(c.a)(e,[{key:"start",value:function(){this.setState({started:!0}),f.start()}},{key:"stop",value:function(){this.setState({started:!1,words:[]}),f.stop()}},{key:"render",value:function(){var t=this;return n.a.createElement("div",{className:"App"},n.a.createElement("button",{onClick:function(e){t.start()}},"Start"),n.a.createElement("button",{onClick:function(e){t.stop()}},"Stop"),this.renderStarted())}},{key:"renderStarted",value:function(){if(this.state.started)return n.a.createElement("div",null,n.a.createElement("h3",null,'Say "bumblebee":'),n.a.createElement("ul",null,this.state.words.map((function(t,e){return n.a.createElement("li",{key:e},t)}))))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}],[[12,1,2]]]);
//# sourceMappingURL=main.9a118c09.chunk.js.map