(this["webpackJsonpbumblebee-basic-example"]=this["webpackJsonpbumblebee-basic-example"]||[]).push([[0],[,,,,,,,,,function(t,e,n){var i=n(2),o=n(3),a=n(18),s=n(20),r=n(4),c=n(21),u=n(23),l=n(24),h=n(25),d=n(26),f={bumblebee:n(27),grasshopper:n(28),hey_edison:n(29),porcupine:n(30),terminator:n(31)},w=function(t){"use strict";function e(){var t;return i(this,e),(t=a(this,s(e).call(this))).hotword=null,t.hotwords={},t.setMicVolume(1),t.setMuted(!1),t.setSensitivity(.5),t.setWorkersPath("/"),t.setVoiceProcessor(h),t._detectionCallback=t.detectionCallback.bind(r(t)),t._errorCallback=t.errorCallback.bind(r(t)),t._audioProcessCallback=t.audioProcessCallback.bind(r(t)),t._audioAnalyserCallback=t.audioAnalyserCallback.bind(r(t)),t}return c(e,t),o(e,[{key:"setVoiceProcessor",value:function(t){this.webVoiceProcessor=t}},{key:"addHotword",value:function(t,e,n){if(e||t in f&&(e=f[t]),!e)throw new Error("no hotword data");this.hotwords[t]={data:e,sensitivity:n||this.defaultSensitivity}}},{key:"setHotword",value:function(t){if(null===t||""===t)this.hotword=null;else{if(!(Object.keys(this.hotwords).indexOf(t)>-1))throw new Error("invalid hotword");this.hotword=t}}},{key:"setSensitivity",value:function(t){this.defaultSensitivity=t}},{key:"stop",value:function(){this.porcupineManager&&this.porcupineManager.stop(),this.started=!1}},{key:"setWorkersPath",value:function(t){this.webWorkersPath=t}},{key:"detectionCallback",value:function(t){t&&(console.log("bumblebee keyword",t),null===this.hotword||t===this.hotword?this.emit("hotword",t):console.log("wrong hotword:",t))}},{key:"errorCallback",value:function(t){this.emit("error",t)}},{key:"audioProcessCallback",value:function(t,e){this.emit("data",t,e)}},{key:"audioAnalyserCallback",value:function(t,e){this.gainNode=e,this.emit("analyser",t)}},{key:"start",value:function(){if(!this.started){this.started=!0,this.porcupineManager=l(this.webVoiceProcessor,this.webWorkersPath+"/porcupine_worker.js",this.webWorkersPath+"/downsampling_worker.js");var t={},e=[];for(var n in this.hotwords){var i=this.hotwords[n];t[n]=i.data,e.push(i.sensitivity)}this.porcupineManager.start(t,new Float32Array(e),this._gain,this._detectionCallback,this._errorCallback,this._audioProcessCallback,this._audioAnalyserCallback)}}},{key:"setMuted",value:function(t){this.muted=t,this.gainNode&&(t?(this._gain=this.gainNode.gain.value,this.gainNode.gain.value=0):this.gainNode.gain.value=this._gain||1)}},{key:"setMicVolume",value:function(t){this._gain=t,this.gainNode&&(this.gainNode.gain.value=t)}}]),e}(u);t.exports=w,t.exports.SpectrumAnalyser=d},,,function(t,e,n){t.exports=n(32)},,,,,function(t,e,n){},,,,,,,function(t,e){t.exports=function(t,e,n){var i;return{start:function(o,a,s,r,c,u,l){(i=new Worker(e)).postMessage({command:"init",keywordIDs:o,sensitivities:a}),i.onmessage=function(t){r(t.data.keyword)},t.start([this],s,n,c,u,l)},processFrame:function(t){i.postMessage({command:"process",inputFrame:t})},stop:function(){t.stop(),i.postMessage({command:"release"})}}}},function(t,e){var n,i,o,a,s,r,c,u=!1;t.exports={start:function(t,e,l,h,d,f){n||navigator.mediaDevices.getUserMedia({audio:!0}).then((function(h){a=new(window.AudioContext||window.webkitAudioContext),s=a.createMediaStreamSource(h),r=h,c=a.createGain(),s.connect(c),c.gain.value=e||1,(i=a.createScriptProcessor(4096,1,1)).onaudioprocess=function(t){if(u){var e=t.inputBuffer.getChannelData(0);n.postMessage({command:"process",inputFrame:e})}},c.connect(i),i.connect(a.destination),n=new Worker(l);var w=s.context.sampleRate;n.postMessage({command:"init",inputSampleRate:w}),n.onmessage=function(e){t.forEach((function(t){t.processFrame(e.data)})),d&&d(e.data)},o=a.createAnalyser(),c.connect(o),f(o,c)})).catch(h),u=!0},stop:function(){u=!1,o&&o.disconnect(),i&&i.disconnect(),c&&c.disconnect(),r&&r.getTracks()[0].stop(),a&&a.close(),n&&n.postMessage({command:"reset"}),n=null}}},function(t,e,n){var i=n(2),o=n(3),a=function(){"use strict";function t(e,n){i(this,t),this.analyser=e,this.canvas=n,this.drawing=!1,e.fftSize=2048,this.bufferLength=e.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.ctx=n.getContext("2d"),this.setColors("#fff","#000"),this.ctx.lineWidth=1.5,this._draw=this.draw.bind(this)}return o(t,[{key:"setColors",value:function(t,e){this.setLineColor(t),this.setBackgroundColor(e)}},{key:"setLineColor",value:function(t){t&&(this.ctx.strokeStyle=t)}},{key:"setBackgroundColor",value:function(t){this.bgColor=t}},{key:"draw",value:function(){var t=this.canvas,e=this.bufferLength,n=this.ctx;this.analyser.getByteTimeDomainData(this.dataArray),this.bgColor?(n.fillStyle=this.bgColor,n.fillRect(0,0,t.width,t.height)):n.clearRect(0,0,t.width,t.height),this.muted&&(n.fillStyle=n.strokeStyle,n.font="14px Arial",n.fillText("MUTED",t.width/2-25,t.height/2-10)),n.beginPath();for(var i=1*t.width/e,o=0,a=0;a<e;a++){var s=this.dataArray[a]/128*t.height/2;0===a?n.moveTo(o,s):n.lineTo(o,s),o+=i}n.lineTo(t.width,t.height/2),n.stroke(),this.drawing&&requestAnimationFrame(this._draw)}},{key:"start",value:function(){this.drawing=!0,this.draw()}},{key:"stop",value:function(){this.drawing=!1}},{key:"setMuted",value:function(t){this.muted=t}}]),t}();t.exports=a},function(t,e){t.exports=new Uint8Array([140,20,139,111,75,233,106,137,144,225,192,133,238,96,238,92,238,77,124,58,215,21,175,49,127,74,52,213,106,111,236,227,15,116,168,49,25,247,70,183,184,63,166,55,113,59,20,242,220,165,61,139,6,132,219,145,71,186,73,108,204,114,81,20,173,53,233,81,39,112,154,74,124,38,52,44,103,80,171,64,246,219,196,149,250,86,199,18,85,196,46,148])},function(t,e){t.exports=new Uint8Array([63,248,199,1,109,188,92,184,74,145,14,22,249,165,250,179,207,178,252,133,86,172,230,209,98,241,143,227,200,83,60,167,45,13,95,90,213,80,112,255,65,225,156,169,157,118,148,239,165,208,231,177,62,45,149,9,59,64,139,235,98,25,229,88,181,113,42,199,112,77,58,240,149,86,90,227,52,64,191,20,105,148,239,171,232,140,108,207,85,184,139,140,149,90,224,129])},function(t,e){t.exports=new Uint8Array([105,69,143,223,200,90,236,178,53,186,112,1,230,239,211,95,128,49,177,144,54,213,58,205,94,36,172,243,234,84,68,102,34,225,183,184,20,252,163,212,29,115,74,102,176,170,244,132,226,77,131,75,93,209,186,12,32,161,150,39,59,106,156,83,18,73,194,32,243,78,173,141,73,3,23,188,39,83,237,173,41,255,104,235,182,11,147,70,210,18,207,32])},function(t,e){t.exports=new Uint8Array([141,79,23,119,186,166,54,242,32,198,156,106,85,144,162,180,200,158,73,76,215,80,192,250,113,157,118,40,73,11,45,237,135,229,8,120,190,205,55,228,64,21,161,93,247,158,240,49,61,220,151,240,45,226,237,13,142,208,244,50,134,90,193,131,66,124,41,29,103,3,26,24,130,104,28,95,242,0,100,108,4,122,180,141,153,142,89,116,25,200,144,72,49,136,201,9])},function(t,e){t.exports=new Uint8Array([182,182,228,225,214,60,163,39,189,99,130,22,200,205,11,116,209,231,163,158,236,230,42,62,120,46,115,253,67,24,5,23,51,7,82,8,122,47,50,68,25,74,153,130,181,254,180,241,115,233,201,172,82,170,53,141,208,81,50,236,244,12,227,166,185,237,78,31,137,77,23,70,32,233,186,71,88,73,159,180,27,58,246,244,124,36,48,89,246,46,206,38])},function(t,e,n){"use strict";n.r(e);var i=n(0),o=n.n(i),a=n(5),s=n.n(a),r=(n(17),n(6)),c=n(7),u=n(10),l=n(8),h=n(11),d=n(9),f=new(n.n(d).a);f.setSensitivity(.5),f.setWorkersPath("./bumblebee-workers"),f.addHotword("bumblebee"),f.setHotword("bumblebee");var w=function(t){function e(){var t;Object(r.a)(this,e),(t=Object(u.a)(this,Object(l.a)(e).call(this))).state={words:[],started:!1};var n=new Audio("sounds/bumblebee-on.mp3");return f.on("hotword",(function(e){n.play();var i=t.state.words;i.push(e),t.setState({words:i})})),t}return Object(h.a)(e,t),Object(c.a)(e,[{key:"start",value:function(){this.setState({started:!0}),f.start()}},{key:"stop",value:function(){this.setState({started:!1,words:[]}),f.stop()}},{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:"App"},o.a.createElement("button",{onClick:function(e){t.start()}},"Start"),o.a.createElement("button",{onClick:function(e){t.stop()}},"Stop"),this.renderStarted())}},{key:"renderStarted",value:function(){if(this.state.started)return o.a.createElement("div",null,o.a.createElement("h3",null,'Say "bumblebee":'),o.a.createElement("ul",null,this.state.words.map((function(t,e){return o.a.createElement("li",{key:e},t)}))))}}]),e}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}],[[12,1,2]]]);
//# sourceMappingURL=main.51cda90d.chunk.js.map