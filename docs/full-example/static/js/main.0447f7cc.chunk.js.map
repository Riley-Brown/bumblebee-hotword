{"version":3,"sources":["../../../lib/bumblebee.js","../../../lib/porcupine_manager.js","../../../lib/web-voice-processor.js","../../../lib/spectrum-analyser.js","../../../hotwords/bumblebee.js","../../../hotwords/grasshopper.js","../../../hotwords/hey_edison.js","../../../hotwords/porcupine.js","../../../hotwords/terminator.js","BumbleBeeApp.js","serviceWorker.js","index.js"],"names":["EventEmitter","require","PorcupineManager","webVoiceProcessor","SpectrumAnalyser","BumbleBee","hotword","hotwords","setMicVolume","setMuted","setSensitivity","setWorkersPath","setVoiceProcessor","_detectionCallback","detectionCallback","bind","_errorCallback","errorCallback","_audioProcessCallback","audioProcessCallback","_audioAnalyserCallback","audioAnalyserCallback","proc","this","name","data","sensitivity","defaultSensitivity","w","Object","keys","indexOf","Error","s","porcupineManager","stop","started","path","webWorkersPath","keyword","console","log","emit","e","sampleRate","audioAnalyser","gainNode","keywordIDs","sensitivities","id","h","push","start","Float32Array","_gain","muted","gain","value","vol","module","exports","porcupineWorkerScript","downsamplingScript","porcupineWorker","volume","audioContextCallback","Worker","postMessage","command","onmessage","processFrame","frame","inputFrame","downsampler","audioProcessor","audioContext","audioSource","audioStream","isRecording","engines","downsamplerScript","navigator","mediaDevices","getUserMedia","audio","then","stream","window","AudioContext","webkitAudioContext","createMediaStreamSource","createGain","connect","createScriptProcessor","onaudioprocess","inputBuffer","getChannelData","destination","context","inputSampleRate","forEach","engine","createAnalyser","catch","disconnect","getTracks","close","SpectrumAnalyzer","analyser","canvas","drawing","fftSize","bufferLength","frequencyBinCount","dataArray","Uint8Array","ctx","getContext","setColors","lineWidth","_draw","draw","linecolor","bgcolor","setLineColor","setBackgroundColor","strokeStyle","bgColor","getByteTimeDomainData","fillStyle","fillRect","width","height","clearRect","font","fillText","beginPath","sliceWidth","x","i","y","moveTo","lineTo","stroke","requestAnimationFrame","bumblebee","addHotword","setHotword","Say","setWorkers","voice","language","profile","BumbleBeeApp","state","bumblebee_started","spokenHotwords","selectedHotword","sensivitiyChanged","action","sounds","Audio","hey_edison","grasshopper","porcupine","terminator","on","word","recognizeHotword","document","getElementById","className","onChange","changeHotword","renderHotwordOptions","changeSensitivity","renderSensitivities","changeAction","onClick","toggleHotword","toggleMuted","renderSay","renderBumblebees","join","map","key","unshift","n","p","target","options","selectedIndex","setState","alert","play","say","b","Component","Boolean","location","hostname","match","ReactDOM","render","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.0447f7cc.chunk.js","sourcesContent":["const EventEmitter = require('events');\nconst PorcupineManager = require('./porcupine_manager');\nconst webVoiceProcessor = require('./web-voice-processor');\nconst SpectrumAnalyser = require('./spectrum-analyser');\n\nclass BumbleBee extends EventEmitter {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.hotword = null;\n\t\tthis.hotwords = {};\n\t\tthis.setMicVolume(1);\n\t\tthis.setMuted(false);\n\t\tthis.setSensitivity(0.5);\n\t\tthis.setWorkersPath('/');\n\t\tthis.setVoiceProcessor(webVoiceProcessor);\n\t\tthis._detectionCallback = this.detectionCallback.bind(this);\n\t\tthis._errorCallback = this.errorCallback.bind(this);\n\t\tthis._audioProcessCallback = this.audioProcessCallback.bind(this);\n\t\tthis._audioAnalyserCallback = this.audioAnalyserCallback.bind(this);\n\t}\n\t\n\tsetVoiceProcessor(proc) {\n\t\tthis.webVoiceProcessor = proc;\n\t}\n\t\n\taddHotword(name, data, sensitivity) {\n\t\tthis.hotwords[name] = {\n\t\t\tdata,\n\t\t\tsensitivity: sensitivity || this.defaultSensitivity\n\t\t};\n\t}\n\t\n\tsetHotword(w) {\n\t\tif (w === null || w === '') {\n\t\t\tthis.hotword = null;\n\t\t}\n\t\telse if (Object.keys(this.hotwords).indexOf(w) > -1) {\n\t\t\tthis.hotword = w;\n\t\t}\n\t\telse {\n\t\t\tthrow new Error('invalid hotword');\n\t\t}\n\t}\n\t\n\tsetSensitivity(s) {\n\t\tthis.defaultSensitivity = s;\n\t}\n\t\n\tstop() {\n\t\tif (this.porcupineManager) this.porcupineManager.stop();\n\t\tthis.started = false;\n\t}\n\t\n\tsetWorkersPath(path) {\n\t\tthis.webWorkersPath = path;\n\t}\n\t\n\tdetectionCallback(keyword) {\n\t\tif (keyword) {\n\t\t\tconsole.log('bumblebee keyword', keyword);\n\t\t\tif (this.hotword === null || keyword === this.hotword) {\n\t\t\t\tthis.emit('hotword', keyword);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.log('wrong hotword:', keyword);\n\t\t\t}\n\t\t}\n\t}\n\t\n\terrorCallback(e) {\n\t\tthis.emit('error', e);\n\t}\n\t\n\taudioProcessCallback(data, sampleRate) {\n\t\tthis.emit('data', data, sampleRate);\n\t}\n\t\n\taudioAnalyserCallback(audioAnalyser, gainNode) {\n\t\tthis.gainNode = gainNode;\n\t\tthis.emit('analyser', audioAnalyser);\n\t}\n\t\n\tstart() {\n\t\tif (this.started) return;\n\t\tthis.started = true;\n\t\tthis.porcupineManager = PorcupineManager(\n\t\t\tthis.webVoiceProcessor,\n\t\t\tthis.webWorkersPath+\"/porcupine_worker.js\",\n\t\t\tthis.webWorkersPath+\"/downsampling_worker.js\");\n\t\t\n\t\tlet keywordIDs = {};\n\t\tlet sensitivities = [];\n\t\tfor (let id in this.hotwords) {\n\t\t\tlet h = this.hotwords[id];\n\t\t\tkeywordIDs[id] = h.data;\n\t\t\tsensitivities.push(h.sensitivity);\n\t\t}\n\t\tthis.porcupineManager.start(keywordIDs, new Float32Array(sensitivities), this._gain, this._detectionCallback, this._errorCallback, this._audioProcessCallback, this._audioAnalyserCallback);\n\t}\n\t\n\tsetMuted(muted) {\n\t\tthis.muted = muted;\n\t\tif (this.gainNode) {\n\t\t\tif (muted) {\n\t\t\t\tthis._gain = this.gainNode.gain.value;\n\t\t\t\tthis.gainNode.gain.value = 0;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.gainNode.gain.value = this._gain || 1;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tsetMicVolume(vol) {\n\t\tthis._gain = vol;\n\t\tif (this.gainNode) this.gainNode.gain.value = vol;\n\t}\n}\n\nmodule.exports = BumbleBee;\nmodule.exports.SpectrumAnalyser = SpectrumAnalyser;","const PorcupineManager = (function (webVoiceProcessor, porcupineWorkerScript, downsamplingScript) {\n\tlet porcupineWorker;\n\t\n\tlet start = function (keywordIDs, sensitivities, volume, detectionCallback, errorCallback, audioProcessCallback, audioContextCallback) {\n\t\tporcupineWorker = new Worker(porcupineWorkerScript);\n\t\tporcupineWorker.postMessage({\n\t\t\tcommand: \"init\",\n\t\t\tkeywordIDs: keywordIDs,\n\t\t\tsensitivities: sensitivities\n\t\t});\n\t\t\n\t\tporcupineWorker.onmessage = function (e) {\n\t\t\tdetectionCallback(e.data.keyword);\n\t\t};\n\t\t\n\t\twebVoiceProcessor.start([this], volume, downsamplingScript, errorCallback, audioProcessCallback, audioContextCallback);\n\t};\n\t\n\tlet stop = function () {\n\t\twebVoiceProcessor.stop();\n\t\tporcupineWorker.postMessage({command: \"release\"});\n\t};\n\t\n\tlet processFrame = function (frame) {\n\t\tporcupineWorker.postMessage({command: \"process\", inputFrame: frame});\n\t};\n\t\n\treturn {start: start, processFrame: processFrame, stop: stop};\n});\n\nmodule.exports = PorcupineManager;","let downsampler;\n\nlet isRecording = false;\nlet audioProcessor;\nlet audioAnalyser;\nlet audioContext;\nlet audioSource;\nlet audioStream;\nlet gainNode;\n\nlet start = function (engines, volume, downsamplerScript, errorCallback, audioProcessCallback, audioContextCallback) {\n\tif (!downsampler) {\n\t\tnavigator.mediaDevices.getUserMedia({audio: true})\n\t\t.then(stream => {\n\t\t\taudioContext = new (window.AudioContext || window.webkitAudioContext)();\n\t\t\taudioSource = audioContext.createMediaStreamSource(stream);\n\t\t\taudioStream = stream;\n\t\t\t\n\t\t\tgainNode = audioContext.createGain();\n\t\t\taudioSource.connect(gainNode);\n\t\t\tgainNode.gain.value = volume || 1;\n\t\t\t\n\t\t\taudioProcessor = audioContext.createScriptProcessor(4096, 1, 1);\n\t\t\taudioProcessor.onaudioprocess = function (e) {\n\t\t\t\tif (!isRecording) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst data = e.inputBuffer.getChannelData(0);\n\t\t\t\tdownsampler.postMessage({command: \"process\", inputFrame: data});\n\t\t\t};\n\t\t\t\n\t\t\tgainNode.connect(audioProcessor);\n\t\t\taudioProcessor.connect(audioContext.destination);\n\t\t\t\n\t\t\tdownsampler = new Worker(downsamplerScript);\n\t\t\tconst sampleRate = audioSource.context.sampleRate;\n\t\t\tdownsampler.postMessage({command: \"init\", inputSampleRate: sampleRate});\n\t\t\tdownsampler.onmessage = function (e) {\n\t\t\t\tengines.forEach(function (engine) {\n\t\t\t\t\tengine.processFrame(e.data);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (audioProcessCallback) {\n\t\t\t\t\taudioProcessCallback(e.data);\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\taudioAnalyser = audioContext.createAnalyser();\n\t\t\tgainNode.connect(audioAnalyser);\n\t\t\taudioContextCallback(audioAnalyser, gainNode);\n\t\t})\n\t\t.catch(errorCallback);\n\t}\n\t\n\tisRecording = true;\n};\n\nlet stop = function () {\n\tisRecording = false;\n\tif (audioAnalyser) audioAnalyser.disconnect();\n\tif (audioProcessor) audioProcessor.disconnect();\n\tif (gainNode) gainNode.disconnect();\n\tif (audioStream) audioStream.getTracks()[0].stop();\n\tif (audioContext) audioContext.close();\n\tif (downsampler) downsampler.postMessage({command: \"reset\"});\n\tdownsampler = null;\n};\n\nmodule.exports = {start: start, stop: stop};\n","class SpectrumAnalyzer {\n\tconstructor(analyser, canvas) {\n\t\tthis.analyser = analyser;\n\t\tthis.canvas = canvas;\n\t\tthis.drawing = false;\n\t\t\n\t\tanalyser.fftSize = 2048;\n\t\tthis.bufferLength = analyser.frequencyBinCount;\n\t\tthis.dataArray = new Uint8Array(this.bufferLength);\n\t\t\n\t\tthis.ctx = canvas.getContext('2d');\n\t\tthis.setColors('#fff', '#000');\n\t\tthis.ctx.lineWidth = 1.5;\n\t\tthis._draw = this.draw.bind(this);\n\t}\n\tsetColors(linecolor, bgcolor) {\n\t\tthis.setLineColor(linecolor);\n\t\tthis.setBackgroundColor(bgcolor);\n\t}\n\tsetLineColor(linecolor) {\n\t\tif (linecolor) this.ctx.strokeStyle = linecolor;\n\t}\n\tsetBackgroundColor(bgcolor) {\n\t\tthis.bgColor = bgcolor;\n\t}\n\tdraw() {\n\t\tconst {canvas, bufferLength, ctx} = this;\n\t\tthis.analyser.getByteTimeDomainData(this.dataArray);\n\t\t\n\t\tif (this.bgColor) {\n\t\t\tctx.fillStyle = this.bgColor;\n\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\n\t\t}\n\t\telse {\n\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\t\t}\n\t\t\n\t\tif (this.muted) {\n\t\t\tctx.fillStyle = ctx.strokeStyle;\n\t\t\tctx.font = '14px Arial';\n\t\t\tctx.fillText('MUTED', canvas.width/2 - 25, canvas.height/2 - 10)\n\t\t}\n\t\t\n\t\tctx.beginPath();\n\t\t\n\t\tvar sliceWidth = canvas.width * 1.0 / bufferLength;\n\t\tvar x = 0;\n\t\t\n\t\tfor (var i = 0; i < bufferLength; i++) {\n\t\t\tvar v = (this.dataArray[i] / 128.0),\n\t\t\t\ty = v * canvas.height / 2;\n\t\t\t\n\t\t\tif (i === 0) {\n\t\t\t\tctx.moveTo(x, y);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tctx.lineTo(x, y);\n\t\t\t}\n\t\t\tx += sliceWidth;\n\t\t}\n\t\t\n\t\tctx.lineTo(canvas.width, canvas.height / 2);\n\t\tctx.stroke();\n\t\t\n\t\tif (this.drawing) requestAnimationFrame(this._draw);\n\t}\n\tstart() {\n\t\tthis.drawing = true;\n\t\tthis.draw();\n\t}\n\tstop() {\n\t\tthis.drawing = false;\n\t}\n\tsetMuted(muted) {\n\t\tthis.muted = muted;\n\t}\n}\n\nmodule.exports = SpectrumAnalyzer;","module.exports = new Uint8Array([\n  0x8c, 0x14, 0x8b, 0x6f, 0x4b, 0xe9, 0x6a, 0x89, 0x90, 0xe1, 0xc0, 0x85,\n  0xee, 0x60, 0xee, 0x5c, 0xee, 0x4d, 0x7c, 0x3a, 0xd7, 0x15, 0xaf, 0x31,\n  0x7f, 0x4a, 0x34, 0xd5, 0x6a, 0x6f, 0xec, 0xe3, 0x0f, 0x74, 0xa8, 0x31,\n  0x19, 0xf7, 0x46, 0xb7, 0xb8, 0x3f, 0xa6, 0x37, 0x71, 0x3b, 0x14, 0xf2,\n  0xdc, 0xa5, 0x3d, 0x8b, 0x06, 0x84, 0xdb, 0x91, 0x47, 0xba, 0x49, 0x6c,\n  0xcc, 0x72, 0x51, 0x14, 0xad, 0x35, 0xe9, 0x51, 0x27, 0x70, 0x9a, 0x4a,\n  0x7c, 0x26, 0x34, 0x2c, 0x67, 0x50, 0xab, 0x40, 0xf6, 0xdb, 0xc4, 0x95,\n  0xfa, 0x56, 0xc7, 0x12, 0x55, 0xc4, 0x2e, 0x94\n]);","module.exports = new Uint8Array([\n  0x3f, 0xf8, 0xc7, 0x01, 0x6d, 0xbc, 0x5c, 0xb8, 0x4a, 0x91, 0x0e, 0x16,\n  0xf9, 0xa5, 0xfa, 0xb3, 0xcf, 0xb2, 0xfc, 0x85, 0x56, 0xac, 0xe6, 0xd1,\n  0x62, 0xf1, 0x8f, 0xe3, 0xc8, 0x53, 0x3c, 0xa7, 0x2d, 0x0d, 0x5f, 0x5a,\n  0xd5, 0x50, 0x70, 0xff, 0x41, 0xe1, 0x9c, 0xa9, 0x9d, 0x76, 0x94, 0xef,\n  0xa5, 0xd0, 0xe7, 0xb1, 0x3e, 0x2d, 0x95, 0x09, 0x3b, 0x40, 0x8b, 0xeb,\n  0x62, 0x19, 0xe5, 0x58, 0xb5, 0x71, 0x2a, 0xc7, 0x70, 0x4d, 0x3a, 0xf0,\n  0x95, 0x56, 0x5a, 0xe3, 0x34, 0x40, 0xbf, 0x14, 0x69, 0x94, 0xef, 0xab,\n  0xe8, 0x8c, 0x6c, 0xcf, 0x55, 0xb8, 0x8b, 0x8c, 0x95, 0x5a, 0xe0, 0x81\n]);","module.exports = new Uint8Array([\n  0x69, 0x45, 0x8f, 0xdf, 0xc8, 0x5a, 0xec, 0xb2, 0x35, 0xba, 0x70, 0x01,\n  0xe6, 0xef, 0xd3, 0x5f, 0x80, 0x31, 0xb1, 0x90, 0x36, 0xd5, 0x3a, 0xcd,\n  0x5e, 0x24, 0xac, 0xf3, 0xea, 0x54, 0x44, 0x66, 0x22, 0xe1, 0xb7, 0xb8,\n  0x14, 0xfc, 0xa3, 0xd4, 0x1d, 0x73, 0x4a, 0x66, 0xb0, 0xaa, 0xf4, 0x84,\n  0xe2, 0x4d, 0x83, 0x4b, 0x5d, 0xd1, 0xba, 0x0c, 0x20, 0xa1, 0x96, 0x27,\n  0x3b, 0x6a, 0x9c, 0x53, 0x12, 0x49, 0xc2, 0x20, 0xf3, 0x4e, 0xad, 0x8d,\n  0x49, 0x03, 0x17, 0xbc, 0x27, 0x53, 0xed, 0xad, 0x29, 0xff, 0x68, 0xeb,\n  0xb6, 0x0b, 0x93, 0x46, 0xd2, 0x12, 0xcf, 0x20\n]);","module.exports = new Uint8Array([\n  0x8d, 0x4f, 0x17, 0x77, 0xba, 0xa6, 0x36, 0xf2, 0x20, 0xc6, 0x9c, 0x6a,\n  0x55, 0x90, 0xa2, 0xb4, 0xc8, 0x9e, 0x49, 0x4c, 0xd7, 0x50, 0xc0, 0xfa,\n  0x71, 0x9d, 0x76, 0x28, 0x49, 0x0b, 0x2d, 0xed, 0x87, 0xe5, 0x08, 0x78,\n  0xbe, 0xcd, 0x37, 0xe4, 0x40, 0x15, 0xa1, 0x5d, 0xf7, 0x9e, 0xf0, 0x31,\n  0x3d, 0xdc, 0x97, 0xf0, 0x2d, 0xe2, 0xed, 0x0d, 0x8e, 0xd0, 0xf4, 0x32,\n  0x86, 0x5a, 0xc1, 0x83, 0x42, 0x7c, 0x29, 0x1d, 0x67, 0x03, 0x1a, 0x18,\n  0x82, 0x68, 0x1c, 0x5f, 0xf2, 0x00, 0x64, 0x6c, 0x04, 0x7a, 0xb4, 0x8d,\n  0x99, 0x8e, 0x59, 0x74, 0x19, 0xc8, 0x90, 0x48, 0x31, 0x88, 0xc9, 0x09\n]);","module.exports = new Uint8Array([\n  0xb6, 0xb6, 0xe4, 0xe1, 0xd6, 0x3c, 0xa3, 0x27, 0xbd, 0x63, 0x82, 0x16,\n  0xc8, 0xcd, 0x0b, 0x74, 0xd1, 0xe7, 0xa3, 0x9e, 0xec, 0xe6, 0x2a, 0x3e,\n  0x78, 0x2e, 0x73, 0xfd, 0x43, 0x18, 0x05, 0x17, 0x33, 0x07, 0x52, 0x08,\n  0x7a, 0x2f, 0x32, 0x44, 0x19, 0x4a, 0x99, 0x82, 0xb5, 0xfe, 0xb4, 0xf1,\n  0x73, 0xe9, 0xc9, 0xac, 0x52, 0xaa, 0x35, 0x8d, 0xd0, 0x51, 0x32, 0xec,\n  0xf4, 0x0c, 0xe3, 0xa6, 0xb9, 0xed, 0x4e, 0x1f, 0x89, 0x4d, 0x17, 0x46,\n  0x20, 0xe9, 0xba, 0x47, 0x58, 0x49, 0x9f, 0xb4, 0x1b, 0x3a, 0xf6, 0xf4,\n  0x7c, 0x24, 0x30, 0x59, 0xf6, 0x2e, 0xce, 0x26\n]);","import React, {Component} from 'react';\nimport Say from 'jaxcore-say';\n\nimport BumbleBee, {SpectrumAnalyser} from 'bumblebee-hotword';\n\nconst bumblebee = new BumbleBee();\n\nbumblebee.setWorkersPath('./bumblebee-workers');\n\nbumblebee.addHotword('bumblebee', require('bumblebee-hotword/hotwords/bumblebee'));\nbumblebee.addHotword('grasshopper', require('bumblebee-hotword/hotwords/grasshopper'));\nbumblebee.addHotword('hey_edison', require('bumblebee-hotword/hotwords/hey_edison'));\nbumblebee.addHotword('porcupine', require('bumblebee-hotword/hotwords/porcupine'));\nbumblebee.addHotword('terminator', require('bumblebee-hotword/hotwords/terminator'));\n\nbumblebee.setHotword('bumblebee');\n\nSay.setWorkers({\n\t'espeak': 'webworkers/espeak-en-worker.js'\n});\n\nvar voice = new Say({\n\tlanguage: 'en',\n\tprofile: 'Jack'\n});\n\nclass BumbleBeeApp extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\t\n\t\tthis.state = {\n\t\t\thotwords: Object.keys(bumblebee.hotwords),\n\t\t\tbumblebee_started: false,\n\t\t\tspokenHotwords: [],\n\t\t\tselectedHotword: null,\n\t\t\tsensivitiyChanged: false,\n\t\t\tsensitivity: 0.5,\n\t\t\taction: 'sounds',\n\t\t\tmuted: false\n\t\t\t// action: 'texttospeech'\n\t\t};\n\t\t\n\t\tthis.sounds = {\n\t\t\tbumblebee: new Audio('sounds/bumblebee-on.mp3'),\n\t\t\they_edison: new Audio('sounds/hey_edison.mp3'),\n\t\t\tgrasshopper: new Audio('sounds/grasshopper.mp3'),\n\t\t\tporcupine: new Audio('sounds/porcupine.mp3'),\n\t\t\tterminator: new Audio('sounds/terminator.mp3')\n\t\t};\n\t\t\n\t\tbumblebee.on('hotword', (word) => {\n\t\t\tthis.recognizeHotword(word);\n\t\t});\n\t\t\n\t\t// downsampled microphone audio data now available:\n\t\t// bumblebee.on('data', function(data) {\n\t\t// \tconsole.log('audio data:', data);\n\t\t// });\n\t}\n\t\n\tcomponentDidMount() {\n\t\tbumblebee.setHotword(this.state.selectedHotword);\n\t\t\n\t\tbumblebee.on('analyser', (analyser) => {\n\t\t\tconsole.log('analyser', analyser);\n\t\t\tvar canvas = document.getElementById('oscilloscope');\n\t\t\tthis.analyser = new SpectrumAnalyser(analyser, canvas);\n\t\t\t// if (this.state.muted) {\n\t\t\t// \tbumblebee.setMuted(true);\n\t\t\t// \tthis.analyser.setMuted(true);\n\t\t\t// }\n\t\t\tthis.analyser.start();\n\t\t});\n\t}\n\t\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"App\">\n\t\t\t\t\n\t\t\t\tHotword: <select value={this.state.selectedHotword||''} onChange={e => this.changeHotword(e)}>\n\t\t\t\t\t{ this.renderHotwordOptions() }\n\t\t\t\t</select>\n\t\t\t\t\n\t\t\t\t<br/>\n\t\t\t\t\n\t\t\t\tSensitivity: <select value={this.state.sensitivity||''} onChange={e => this.changeSensitivity(e)}>\n\t\t\t\t\t{ this.renderSensitivities() }\n\t\t\t\t</select>\n\t\t\t\t\n\t\t\t\t<br/>\n\t\t\t\t\n\t\t\t\tAction: <select value={this.state.action||''} onChange={e => this.changeAction(e)}>\n\t\t\t\t\t<option value=\"sounds\">Sounds</option>\n\t\t\t\t\t<option value=\"texttospeech\">Speech To Text</option>\n\t\t\t\t</select>\n\t\t\t\t\n\t\t\t\t<br/>\n\t\t\t\t\n\t\t\t\t<button onClick={e => this.toggleHotword()}>\n\t\t\t\t\t{this.state.bumblebee_started ? 'Stop' : 'Start'}\n\t\t\t\t</button>\n\t\t\t\t\n\t\t\t\t<button onClick={e => this.toggleMuted()}>\n\t\t\t\t\t{this.state.muted ? 'Unmute' : 'Mute'}\n\t\t\t\t</button>\n\t\t\t\t\n\t\t\t\t<br/>\n\t\t\t\t<canvas id=\"oscilloscope\" width=\"800\" height=\"100\" />\n\t\t\t\t\n\t\t\t\t{this.renderSay()}\n\t\t\t\t\n\t\t\t\t{this.renderBumblebees()}\n\t\t\t\n\t\t\t</div>\n\t\t);\n\t}\n\t\n\trenderSay() {\n\t\tif (!this.state.bumblebee_started) return;\n\t\tif (this.state.selectedHotword) return (<h3>Say \"{this.state.selectedHotword}\":</h3>);\n\t\telse return (<h4>Say any of the following: {this.state.hotwords.join(', ')}:</h4>);\n\t}\n\t\n\trenderHotwordOptions() {\n\t\tlet h = this.state.hotwords.map((hotword,i) => {\n\t\t\treturn (<option key={i} value={hotword}>{hotword}</option>);\n\t\t});\n\t\th.unshift(<option key={'null'} value={''}>* Any *</option>);\n\t\treturn h;\n\t}\n\t\n\trenderSensitivities(e) {\n\t\tlet s = [];\n\t\tfor (let i=0;i<=10;i++) {\n\t\t\tlet n = i / 10; //Math.round(i / 10) / 10:\n\t\t\tlet p = i * 10; //Math.round(i / 10) / 10:\n\t\t\ts.push(<option key={i} value={n}>{p}%</option>);\n\t\t}\n\t\treturn s;\n\t}\n\t\n\tchangeAction(e) {\n\t\tlet action = e.target.options[e.target.selectedIndex].value;\n\t\tthis.setState({\n\t\t\taction\n\t\t});\n\t}\n\t\n\tchangeSensitivity(e) {\n\t\tlet sensitivity = e.target.options[e.target.selectedIndex].value;\n\t\t\n\t\tif (this.state.sensivitiyChanged) {\n\t\t\talert('Sensitivity can only be set before .start(), reload and try again');\n\t\t}\n\t\telse {\n\t\t\tthis.setState({\n\t\t\t\tsensitivity\n\t\t\t});\n\t\t\tbumblebee.setSensitivity(sensitivity);\n\t\t}\n\t}\n\t\n\tchangeHotword(e) {\n\t\tlet selectedHotword = e.target.options[e.target.selectedIndex].value;\n\t\tbumblebee.setHotword(selectedHotword);\n\t\tthis.setState({\n\t\t\tselectedHotword,\n\t\t\tspokenHotwords: []\n\t\t});\n\t}\n\t\n\ttoggleHotword() {\n\t\tlet hotword = this.state.selectedHotword;\n\t\tif (!this.state.bumblebee_started) {\n\t\t\tconsole.log('starting', hotword);\n\t\t\t\n\t\t\tthis.setState({\n\t\t\t\tbumblebee_started: true,\n\t\t\t\tspokenHotwords: [],\n\t\t\t\tsensivitiyChanged: true\n\t\t\t});\n\t\t\t\n\t\t\tbumblebee.start();\n\t\t\t\n\t\t}\n\t\telse {\n\t\t\tbumblebee.stop();\n\t\t\t\n\t\t\tthis.setState({\n\t\t\t\tbumblebee_started: false,\n\t\t\t\tspokenHotwords: []\n\t\t\t});\n\t\t}\n\t}\n\t\n\ttoggleMuted() {\n\t\tconst muted = !this.state.muted;\n\t\tthis.setState({\n\t\t\tmuted\n\t\t}, () => {\n\t\t\tbumblebee.setMuted(muted);\n\t\t});\n\t}\n\t\n\trecognizeHotword(hotword) {\n\t\tif (hotword === this.state.selectedHotword || !this.state.selectedHotword) {\n\t\t\t\n\t\t\tif (this.state.action === 'sounds') {\n\t\t\t\tthis.sounds[hotword].play();\n\t\t\t}\n\t\t\telse if (this.state.action === 'texttospeech') {\n\t\t\t\tvoice.say(hotword + 'detected');\n\t\t\t}\n\t\t\t\n\t\t\tconst spokenHotwords = this.state.spokenHotwords;\n\t\t\tspokenHotwords.push(hotword);\n\t\t\t\n\t\t\tconsole.log('recognized hotword', hotword);\n\t\t\tthis.setState({\n\t\t\t\tspokenHotwords\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tconsole.log('did not recognize', hotword);\n\t\t}\n\t}\n\t\n\trenderBumblebees() {\n\t\tlet b = this.state.spokenHotwords.map((word,i) => {\n\t\t\treturn (<li key={i}>{word}</li>);\n\t\t});\n\t\treturn (<ul>\n\t\t\t{b}\n\t\t</ul>);\n\t}\n\t\n}\n\nexport default BumbleBeeApp;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport BumbleBeeApp from './BumbleBeeApp';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<BumbleBeeApp />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}