(this["webpackJsonpbumblebee-full-example"]=this["webpackJsonpbumblebee-full-example"]||[]).push([[0],[,,,,,,,function(e,t){e.exports={Jack:{name:"Jack",engine:"espeak",default:{amplitude:100,wordgap:0,pitch:10,speed:180,variant:"m2"},high:{pitch:50},low:{pitch:0},slow:{speed:120},fast:{speed:250}},Pris:{name:"Pris",phoneticName:"Priss",engine:"espeak",default:{amplitude:100,wordgap:0,pitch:47,speed:130,variant:"f5"},high:{pitch:80},low:{pitch:20},slow:{speed:100},fast:{speed:200}},Roy:{name:"Roy",engine:"espeak",default:{amplitude:100,wordgap:0,pitch:35,speed:180,variant:"m1"},high:{pitch:3},low:{pitch:5},slow:{speed:100},fast:{speed:200}},Scotty:{name:"Scotty",engine:"espeak",default:{amplitude:100,wordgap:0,pitch:35,speed:200,variant:"m3"},high:{pitch:3},low:{pitch:5},slow:{speed:100},fast:{speed:230}},Xenu:{name:"Xenu",phoneticName:"zee-new",engine:"espeak",default:{amplitude:100,wordgap:1,pitch:35,speed:170,variant:"klatt3"},high:{pitch:65},low:{pitch:0},slow:{speed:100},fast:{speed:200}},Cylon:{name:"Cylon",engine:"espeak",default:{amplitude:100,wordgap:1,pitch:35,speed:170,variant:"whisperf"},high:{pitch:65,speed:150},low:{pitch:0,speed:140},slow:{pitch:20,speed:100,wordgap:1},fast:{speed:200,wordgap:0}},Leon:{name:"Leon",phoneticName:"Leeon",engine:"espeak",default:{amplitude:100,wordgap:0,pitch:40,speed:150,variant:"m7"},high:{pitch:55},low:{pitch:5},slow:{speed:100},fast:{speed:200}},Rachel:{name:"Rachel",engine:"espeak",default:{amplitude:100,wordgap:0,pitch:60,speed:150,variant:"f2"},high:{pitch:75},low:{pitch:40},slow:{speed:100},fast:{speed:200}},Zhora:{name:"Zhora",engine:"espeak",default:{amplitude:100,wordgap:0,pitch:60,speed:150,variant:"f4"},high:{pitch:75},low:{pitch:40},slow:{speed:100},fast:{speed:200}},Sam:{name:"Sam",engine:"sam",default:{speed:64,pitch:64,throat:128,mouth:128},high:{pitch:50},low:{pitch:110},slow:{speed:100},fast:{speed:40}},Elf:{name:"Elf",engine:"sam",default:{speed:72,pitch:64,throat:110,mouth:160},high:{pitch:50},low:{pitch:110},slow:{speed:100},fast:{speed:40}},Robo:{name:"Robo",engine:"sam",default:{speed:82,pitch:60,throat:190,mouth:190},high:{pitch:40},low:{pitch:100},slow:{speed:120},fast:{speed:50}},Granny:{name:"Granny",engine:"sam",default:{speed:82,pitch:35,throat:145,mouth:145},high:{pitch:25},low:{pitch:120},slow:{speed:130},fast:{speed:40}}}},,function(e,t,n){e.exports=n(42)},,,,function(e,t,n){var r=n(20),i=n(21),o=n(22),a=n(25),s=n(26),u=n(6),l=n(28),c=n(32),f={bumblebee:n(33),porcupine:n(34),dragonfly:n(35),caterpillar:n(36),grasshopper:n(37),terminator:n(38),christina:n(39),francesca:n(40)},p=Object.keys(f),h=function(e){"use strict";function t(e){var n;return r(this,t),(n=o(this,a(t).call(this))).hotword=null,n.setSensitivity(.1),e&&(e.hotword&&n.setHotword(e.hotword),e.sensitivity&&n.sensitivity(e.sensitivity)),n}return s(t,e),i(t,[{key:"setHotword",value:function(e){if(null===e||""===e)this.hotword=null;else{if(!(p.indexOf(e)>-1))throw new Error("invalid hotword");this.hotword=e}}},{key:"sensitivity",value:function(e){this.setSensitivity(e)}},{key:"setSensitivity",value:function(e){this.sensitivities=new Float32Array([e,1,1,1,1,1])}},{key:"stop",value:function(){this.audioManager.stop()}},{key:"createPorcupine",value:function(e){var t=this;this.porcupine?e():l.create(Object.values(f),this.sensitivities,(function(n){t.porcupine=n,e()}))}},{key:"start",value:function(e){var t=this;this.createPorcupine((function(){t.audioManager=new c,t.audioManager.start(t.porcupine,(function(n){if(n>-1){var r=p[n];null===t.hotword||r===t.hotword?(t.emit("hotword",r),e&&e(r)):console.log("invalid hotword:",r)}}),(function(e){console.log("error",e)}))}))}}]),t}(u);e.exports=h},function(e,t,n){e.exports=n(41)},,,,,function(e,t,n){},,,,,,,,,function(e,t,n){var r,i,o,a,s,u,l,c=n(29);e.exports={create:function(e,t,n){c.then((function(f){r=(l=f).cwrap("pv_porcupine_wasm_init","number",["number","number","number","number"]),i=l.cwrap("pv_porcupine_wasm_delete",["number"]),o=l.cwrap("pv_porcupine_wasm_process","number",["number","number"]),a=l.cwrap("pv_wasm_sample_rate","number",[])(),s=l.cwrap("pv_porcupine_wasm_frame_length","number",[])(),u=l.cwrap("pv_porcupine_wasm_version","string",[])();var p=Int32Array.from(e.map((function(e){return e.byteLength}))),h=c._malloc(p.byteLength);new Uint8Array(c.HEAPU8.buffer,h,p.byteLength).set(new Uint8Array(p.buffer));var d=Uint32Array.from(e.map((function(e){var t=c._malloc(e.byteLength);return new Uint8Array(c.HEAPU8.buffer,t,e.byteLength).set(e),t}))),m=c._malloc(d.byteLength);new Uint8Array(c.HEAPU8.buffer,m,d.byteLength).set(new Uint8Array(d.buffer));var g=c._malloc(t.byteLength);if(new Uint8Array(c.HEAPU8.buffer,g,t.byteLength).set(new Uint8Array(t.buffer)),r){var w=r(e.length,h,m,g);if(0===w)throw new Error("failed to initialize porcupine.");var v=c._malloc(2*this.frameLength);n({release:function(){i(w),c._free(v)},process:function(e){new Uint8Array(c.HEAPU8.buffer,v,e.byteLength).set(new Uint8Array(e.buffer));var t=o(w,v);if(-2===t)throw new Error("porcupine failed to process audio");return t},sampleRate:a,frameLength:s,version:u})}else console.error("No initWasm()")}))}}},function(e,t,n){(function(t,r){var i,o={},a=o,s={};for(i in a)a.hasOwnProperty(i)&&(s[i]=a[i]);a.arguments=[],a.thisProgram="./this.program",a.quit=function(e,t){throw t},a.preRun=[],a.postRun=[];var u,l,c="object"===typeof window,f="function"===typeof importScripts,p="object"===typeof t&&!c&&!f,h=!c&&!p&&!f,d="";function m(e){return a.locateFile?a.locateFile(e,d):d+e}p?(d=r+"/",a.read=function(e,t){var r;return u||(u=n(30)),l||(l=n(31)),e=l.normalize(e),r=u.readFileSync(e),t?r:r.toString()},a.readBinary=function(e){var t=a.read(e,!0);return t.buffer||(t=new Uint8Array(t)),S(t.buffer),t},t.argv.length>1&&(a.thisProgram=t.argv[1].replace(/\\/g,"/")),a.arguments=t.argv.slice(2),t.on("uncaughtException",(function(e){if(!(e instanceof ze))throw e})),t.on("unhandledRejection",(function(e,n){t.exit(1)})),a.quit=function(e){t.exit(e)},a.inspect=function(){return"[Emscripten Module object]"}):h?("undefined"!=typeof read&&(a.read=function(e){return read(e)}),a.readBinary=function(e){var t;return"function"===typeof readbuffer?new Uint8Array(readbuffer(e)):(S("object"===typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?a.arguments=scriptArgs:"undefined"!=typeof arguments&&(a.arguments=arguments),"function"===typeof quit&&(a.quit=function(e){quit(e)})):(c||f)&&(d=document.location.href.substring(0,document.location.href.lastIndexOf("/")+1),a.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},f&&(a.readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),a.readAsync=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)},a.setWindowTitle=function(e){document.title=e});var g=a.print||("undefined"!==typeof console?console.log.bind(console):"undefined"!==typeof print?print:null),w=a.printErr||("undefined"!==typeof printErr?printErr:"undefined"!==typeof console&&console.warn.bind(console)||g);for(i in s)s.hasOwnProperty(i)&&(a[i]=s[i]);s=void 0;var v=16;function y(e){var t=B;return B=B+e+15&-16,t}function b(e,t){return t||(t=v),e=Math.ceil(e/t)*t}var _={"f64-rem":function(e,t){return e%t},debugger:function(){}};var k=1024,A=!1;function S(e,t){e||qe("Assertion failed: "+t)}function C(e){var t=a["_"+e];return S(t,"Cannot call unknown function "+e+", make sure it is exported"),t}var E={stackSave:function(){Be()},stackRestore:function(){Fe()},arrayToC:function(e){var t=Ie(e.length);return me(e,t),t},stringToC:function(e){var t=0;if(null!==e&&void 0!==e&&0!==e){var n=1+(e.length<<2);U(e,t=Ie(n),n)}return t}},M={string:E.stringToC,array:E.arrayToC};function R(e,t,n,r,i){var o=C(e),a=[],s=0;if(r)for(var u=0;u<r.length;u++){var l=M[n[u]];l?(0===s&&(s=Be()),a[u]=l(r[u])):a[u]=r[u]}var c=o.apply(null,a);return c=function(e){return"string"===t?T(e):"boolean"===t?Boolean(e):e}(c),0!==s&&Fe(s),c}function x(e,t,n,r){var i=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&i&&!r?C(e):function(){return R(e,t,n,arguments)}}function T(e,t){if(0===t||!e)return"";for(var n,r=0,i=0;r|=n=j[e+i>>0],(0!=n||t)&&(i++,!t||i!=t););t||(t=i);var o="";if(r<128){for(var a;t>0;)a=String.fromCharCode.apply(String,j.subarray(e,e+Math.min(t,1024))),o=o?o+a:a,e+=1024,t-=1024;return o}return P(e)}var L="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function O(e,t){for(var n=t;e[n];)++n;if(n-t>16&&e.subarray&&L)return L.decode(e.subarray(t,n));for(var r,i,o,a,s,u="";;){if(!(r=e[t++]))return u;if(128&r)if(i=63&e[t++],192!=(224&r))if(o=63&e[t++],224==(240&r)?r=(15&r)<<12|i<<6|o:(a=63&e[t++],240==(248&r)?r=(7&r)<<18|i<<12|o<<6|a:(s=63&e[t++],r=248==(252&r)?(3&r)<<24|i<<18|o<<12|a<<6|s:(1&r)<<30|i<<24|o<<18|a<<12|s<<6|63&e[t++])),r<65536)u+=String.fromCharCode(r);else{var l=r-65536;u+=String.fromCharCode(55296|l>>10,56320|1023&l)}else u+=String.fromCharCode((31&r)<<6|i);else u+=String.fromCharCode(r)}}function P(e){return O(j,e)}function H(e,t,n,r){if(!(r>0))return 0;for(var i=n,o=n+r-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a);if(s<=127){if(n>=o)break;t[n++]=s}else if(s<=2047){if(n+1>=o)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=o)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else if(s<=2097151){if(n+3>=o)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}else if(s<=67108863){if(n+4>=o)break;t[n++]=248|s>>24,t[n++]=128|s>>18&63,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+5>=o)break;t[n++]=252|s>>30,t[n++]=128|s>>24&63,t[n++]=128|s>>18&63,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-i}function U(e,t,n){return H(e,j,t,n)}var D,W,j,I,F,B,z,N,q,V,G,K=65536,J=16777216;function X(e,t){return e%t>0&&(e+=t-e%t),e}function Y(e){a.buffer=D=e}function Q(){a.HEAP8=W=new Int8Array(D),a.HEAP16=new Int16Array(D),a.HEAP32=I=new Int32Array(D),a.HEAPU8=j=new Uint8Array(D),a.HEAPU16=new Uint16Array(D),a.HEAPU32=new Uint32Array(D),a.HEAPF32=new Float32Array(D),a.HEAPF64=new Float64Array(D)}function Z(){qe("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+te+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function $(){Z()}F=B=z=N=q=V=G=0;var ee=a.TOTAL_STACK||5242880,te=a.TOTAL_MEMORY||16777216;function ne(){return te}function re(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"===typeof n?void 0===t.arg?a.dynCall_v(n):a.dynCall_vi(n,t.arg):n(void 0===t.arg?null:t.arg)}else t()}}te<ee&&w("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+te+"! (TOTAL_STACK="+ee+")"),a.buffer?D=a.buffer:("object"===typeof WebAssembly&&"function"===typeof WebAssembly.Memory?(a.wasmMemory=new WebAssembly.Memory({initial:te/K,maximum:te/K}),D=a.wasmMemory.buffer):D=new ArrayBuffer(te),a.buffer=D),Q();var ie=[],oe=[],ae=[],se=[],ue=!1;function le(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)he(a.preRun.shift());re(ie)}function ce(){ue||(ue=!0,re(oe))}function fe(){re(ae)}function pe(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)de(a.postRun.shift());re(se)}function he(e){ie.unshift(e)}function de(e){se.unshift(e)}function me(e,t){W.set(e,t)}Math.abs,Math.ceil,Math.floor,Math.min;var ge=0,we=null,ve=null;function ye(e){ge++,a.monitorRunDependencies&&a.monitorRunDependencies(ge)}function be(e){if(ge--,a.monitorRunDependencies&&a.monitorRunDependencies(ge),0==ge&&(null!==we&&(clearInterval(we),we=null),ve)){var t=ve;ve=null,t()}}a.preloadedImages={},a.preloadedAudios={};var _e="data:application/octet-stream;base64,";function ke(e){return String.prototype.startsWith?e.startsWith(_e):0===e.indexOf(_e)}function Ae(e){var t="pv_porcupine.wasm";ke(t)||(t=m(t));var n={global:null,env:null,asm2wasm:_,parent:a},r=null;function i(i,o){if("object"!==typeof WebAssembly)return w("no native wasm support detected"),!1;if(!(a.wasmMemory instanceof WebAssembly.Memory))return w("no native wasm Memory in use"),!1;function s(e,t){(r=e.exports).memory&&function(e){var t=a.buffer;e.byteLength<t.byteLength&&w("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var n=new Int8Array(t);new Int8Array(e).set(n),Y(e),Q()}(r.memory),a.asm=r,a.usingWasm=!0,be()}if(o.memory=a.wasmMemory,n.global={NaN:NaN,Infinity:1/0},n["global.Math"]=Math,n.env=o,ye(),!a.wasmBinary&&"function"===typeof WebAssembly.instantiateStreaming&&!ke(t)&&"function"===typeof fetch){console.log("BumbleBee: fetching wasm",t);var u=fetch(t,{credentials:"same-origin"});WebAssembly.instantiateStreaming(u,n).then((function(t){var n;s((n=t).instance,n.module),e(a)})).catch((function(e){w("wasm streaming compile failed: "+e),w("falling back to ArrayBuffer instantiation")}))}}a.asmPreload=a.asm;var o=a.reallocBuffer;a.reallocBuffer=function(e){return"asmjs"===s?o(e):function(e){e=X(e,a.usingWasm?K:J);var t=a.buffer.byteLength;if(a.usingWasm)try{return-1!==a.wasmMemory.grow((e-t)/65536)?a.buffer=a.wasmMemory.buffer:null}catch(n){return null}}(e)};var s="";!function(e,t,n){if(!t.table){var r=a.wasmTableSize;void 0===r&&(r=1024);var o=a.wasmMaxTableSize;"object"===typeof WebAssembly&&"function"===typeof WebAssembly.Table?t.table=void 0!==o?new WebAssembly.Table({initial:r,maximum:o,element:"anyfunc"}):new WebAssembly.Table({initial:r,element:"anyfunc"}):t.table=new Array(r),a.wasmTable=t.table}t.memoryBase||(t.memoryBase=a.STATIC_BASE),t.tableBase||(t.tableBase=0),i(0,t)}(a.asmGlobalArg,a.asmLibraryArg)}B=(F=k)+1415008,oe.push();var Se=1415008;a.STATIC_BASE=F,a.STATIC_BUMP=Se;var Ce=B;B+=16;var Ee={varargs:0,get:function(e){return Ee.varargs+=4,I[Ee.varargs-4>>2]},getStr:function(){return T(Ee.get())},get64:function(){var e=Ee.get(),t=Ee.get();return S(e>=0?0===t:-1===t),e},getZero:function(){S(0===Ee.get())}};function Me(e,t){Ee.varargs=t;try{var n=Ee.getStreamFromFD(),r=(Ee.get(),Ee.get()),i=Ee.get(),o=Ee.get(),a=r;return FS.llseek(n,a,o),I[i>>2]=n.position,n.getdents&&0===a&&0===o&&(n.getdents=null),0}catch(s){return"undefined"!==typeof FS&&s instanceof FS.ErrnoError||qe(s),-s.errno}}function Re(){var e=a._fflush;e&&e(0);var t=xe.printChar;if(t){var n=xe.buffers;n[1].length&&t(1,10),n[2].length&&t(2,10)}}function xe(e,t){Ee.varargs=t;try{var n=Ee.get(),r=Ee.get(),i=Ee.get(),o=0;xe.buffers||(xe.buffers=[null,[],[]],xe.printChar=function(e,t){var n=xe.buffers[e];S(n),0===t||10===t?((1===e?g:w)(O(n,0)),n.length=0):n.push(t)});for(var a=0;a<i;a++){for(var s=I[r+8*a>>2],u=I[r+(8*a+4)>>2],l=0;l<u;l++)xe.printChar(n,j[s+l]);o+=u}return o}catch(c){return"undefined"!==typeof FS&&c instanceof FS.ErrnoError||qe(c),-c.errno}}function Te(e,t){Ee.varargs=t;try{return 0}catch(n){return"undefined"!==typeof FS&&n instanceof FS.ErrnoError||qe(n),-n.errno}}function Le(e,t){Ee.varargs=t;try{var n=Ee.getStreamFromFD();return FS.close(n),0}catch(r){return"undefined"!==typeof FS&&r instanceof FS.ErrnoError||qe(r),-r.errno}}function Oe(e){var t=Pe,n=t.LLVM_SAVEDSTACKS[e];t.LLVM_SAVEDSTACKS.splice(e,1),Fe(n)}function Pe(){var e=Pe;return e.LLVM_SAVEDSTACKS||(e.LLVM_SAVEDSTACKS=[]),e.LLVM_SAVEDSTACKS.push(Be()),e.LLVM_SAVEDSTACKS.length-1}function He(e,t,n){return j.set(j.subarray(t,t+n),e),e}function Ue(e){return a.___errno_location&&(I[a.___errno_location()>>2]=e),e}function De(e){var t=Date.now()/1e3|0;return e&&(I[e>>2]=t),t}G=y(4),z=N=b(B),V=b(q=z+ee),I[G>>2]=V;function We(e,t){var n=Be();try{return a.dynCall_ii(e,t)}catch(r){if(Fe(n),"number"!==typeof r&&"longjmp"!==r)throw r;a.setThrew(1,0)}}function je(e,t,n,r){var i=Be();try{return a.dynCall_iiii(e,t,n,r)}catch(o){if(Fe(i),"number"!==typeof o&&"longjmp"!==o)throw o;a.setThrew(1,0)}}a.wasmTableSize=6,a.wasmMaxTableSize=6,a.asmGlobalArg={},a.asmLibraryArg={abort:qe,assert:S,enlargeMemory:$,getTotalMemory:ne,abortOnCannotGrowMemory:Z,invoke_ii:We,invoke_iiii:je,___setErrNo:Ue,___syscall140:Me,___syscall146:xe,___syscall54:Te,___syscall6:Le,_emscripten_memcpy_big:He,_llvm_stackrestore:Oe,_llvm_stacksave:Pe,_time:De,flush_NO_FILESYSTEM:Re,DYNAMICTOP_PTR:G,tempDoublePtr:Ce,STACKTOP:N,STACK_MAX:q};a.___errno_location=function(){return a.asm.___errno_location.apply(null,arguments)},a._free=function(){return a.asm._free.apply(null,arguments)},a._llvm_bswap_i32=function(){return a.asm._llvm_bswap_i32.apply(null,arguments)},a._malloc=function(){if(a.asm._malloc)return a.asm._malloc.apply(null,arguments);console.error("Fatal Error: no pv_porcupine.wasm loaded?")},a._memcpy=function(){return a.asm._memcpy.apply(null,arguments)},a._memset=function(){return a.asm._memset.apply(null,arguments)},a._pv_porcupine_wasm_delete=function(){return a.asm._pv_porcupine_wasm_delete.apply(null,arguments)},a._pv_porcupine_wasm_frame_length=function(){return a.asm._pv_porcupine_wasm_frame_length.apply(null,arguments)},a._pv_porcupine_wasm_init=function(){return a.asm._pv_porcupine_wasm_init.apply(null,arguments)},a._pv_porcupine_wasm_process=function(){return a.asm._pv_porcupine_wasm_process.apply(null,arguments)},a._pv_porcupine_wasm_version=function(){return a.asm._pv_porcupine_wasm_version.apply(null,arguments)},a._pv_wasm_sample_rate=function(){return a.asm._pv_wasm_sample_rate.apply(null,arguments)},a._sbrk=function(){return a.asm._sbrk.apply(null,arguments)},a.establishStackSpace=function(){return a.asm.establishStackSpace.apply(null,arguments)},a.getTempRet0=function(){return a.asm.getTempRet0.apply(null,arguments)},a.runPostSets=function(){return a.asm.runPostSets.apply(null,arguments)},a.setTempRet0=function(){return a.asm.setTempRet0.apply(null,arguments)},a.setThrew=function(){return a.asm.setThrew.apply(null,arguments)};var Ie=a.stackAlloc=function(){return a.asm.stackAlloc.apply(null,arguments)},Fe=a.stackRestore=function(){return a.asm.stackRestore.apply(null,arguments)},Be=a.stackSave=function(){return a.asm.stackSave.apply(null,arguments)};a.dynCall_ii=function(){return a.asm.dynCall_ii.apply(null,arguments)},a.dynCall_iiii=function(){return a.asm.dynCall_iiii.apply(null,arguments)};function ze(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Ne(){function e(){a.calledRun||(a.calledRun=!0,A||(ce(),fe(),a.onRuntimeInitialized&&a.onRuntimeInitialized(),pe()))}ge>0||(le(),ge>0||a.calledRun||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),e()}),1)):e()))}function qe(e){throw a.onAbort&&a.onAbort(e),void 0!==e?(g(e),w(e),e=JSON.stringify(e)):e="",A=!0,1,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(a.cwrap=x,a.then=function(e){Ae(e)},ze.prototype=new Error,ze.prototype.constructor=ze,ve=function e(){a.calledRun||Ne(),a.calledRun||(ve=e)},a.run=Ne,a.abort=qe,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();a.noExitRuntime=!0,e.exports=o}).call(this,n(11),"/")},,,function(e,t){e.exports=function(){if("undefined"!==typeof navigator){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;var e,t,n,r=!1,i=[],o=function(o){var a=(new(window.AudioContext||window.webkitAudioContext)).createMediaStreamSource(o);e=a.context.sampleRate;var s=a.context.createScriptProcessor(2048,1,1);s.onaudioprocess=function(o){!function(o){if(r){for(var a=0;a<o.length;a++)i.push(32767*o[a]);for(;i.length*t.sampleRate/e>t.frameLength;){for(var s=new Int16Array(t.frameLength),u=0,l=0,c=0,f=0;c<t.frameLength;){for(u=0,l=0;f<Math.min(i.length,(c+1)*e/t.sampleRate);)u+=i[f],l+=1,f++;s[c]=u/l,c++}n(t.process(s)),i=i.slice(f)}}}(o.inputBuffer.getChannelData(0))},a.connect(s),s.connect(a.context.destination)};this.start=function(e,i,a){e&&(navigator.getUserMedia||a("this browser does not support audio capture"),navigator.getUserMedia({audio:!0},o,a),t=e,n=i,r=!0)},this.stop=function(){r=!1,i=[]}}}},function(e,t){e.exports=new Uint8Array([10,8,184,134,67,54,134,68,149,63,130,97,225,6,234,62,248,202,23,224,158,52,167,109,111,127,49,29,112,122,89,67,224,231,160,206,49,229,19,59,137,210,56,196,150,208,82,222,107,225,68,82,129,158,102,217,245,225,214,239,160,212,245,23,190,202,2,135,161,200,137,76,48,60,110,52,99,109,59,19,28,136,156,124,200,242,197,26,175,236,149,149])},function(e,t){e.exports=new Uint8Array([94,67,85,18,187,176,223,102,157,118,115,198,24,24,76,101,41,133,228,64,138,139,78,243,28,215,194,42,69,149,146,148,94,58,57,27,120,40,203,12,145,50,119,91,229,228,236,17,68,64,161,15,208,145,131,40,124,108,90,196,241,13,60,6,39,197,137,109,204,106,94,191,161,177,18,71,163,87,167,128,155,161,216,48,144,180,87,29,66,241,223,131,180,22,246,140])},function(e,t){e.exports=new Uint8Array([180,202,219,72,237,36,224,160,145,126,211,186,242,77,6,189,14,66,184,0,179,159,46,212,70,210,131,196,224,2,17,74,15,122,12,199,176,42,128,183,122,82,147,70,36,243,168,74,181,33,166,128,158,0,205,239,90,78,175,195,88,134,136,10,140,28,99,155,251,132,252,6,196,57,41,238,246,71,18,247,206,115,200,214,134,174,125,163,154,168,193,123,253,27,215,227])},function(e,t){e.exports=new Uint8Array([120,231,40,255,224,239,196,76,82,230,133,110,205,75,12,109,170,112,45,213,8,96,99,61,243,102,150,85,187,45,184,130,198,49,202,23,31,14,243,252,53,157,11,57,192,75,250,4,19,8,118,6,222,124,211,214,135,255,2,74,66,36,249,246,123,46,78,33,84,79,147,134,244,74,216,163,234,251,158,195,252,148,126,230,166,159,251,183,33,224,63,61,58,0,60,29])},function(e,t){e.exports=new Uint8Array([116,64,159,221,19,174,187,126,2,209,104,114,216,67,199,19,168,151,252,53,144,200,165,8,154,180,148,98,45,171,185,50,250,254,226,200,232,70,182,113,83,34,217,123,63,237,38,133,95,149,75,190,83,226,107,114,70,241,11,118,217,189,198,230,147,23,188,119,122,44,114,125,17,11,95,217,61,207,53,125,156,117,128,51,27,5,213,129,122,176,88,108,171,102,185,91])},function(e,t){e.exports=new Uint8Array([154,153,78,115,141,206,15,151,142,224,141,86,186,62,43,69,219,41,115,205,243,107,220,0,226,97,64,48,69,103,17,33,14,118,88,94,25,226,7,79,225,171,88,217,116,84,40,35,167,82,156,102,95,77,223,27,23,165,100,192,252,209,22,34,0,137,19,152,43,34,41,195,122,201,21,118,58,109,205,28,161,185,242,3,67,48,98,9,128,162,38,210])},function(e,t){e.exports=new Uint8Array([58,207,95,94,244,150,34,98,103,194,190,32,254,141,15,78,50,85,47,200,13,72,132,165,89,38,237,45,134,214,103,71,122,161,2,20,143,217,79,209,31,133,153,205,0,175,12,242,187,77,109,3,50,150,156,20,71,204,31,203,39,96,184,212,210,41,234,138,228,171,132,199,31,89,95,251,150,210,181,229,78,106,1,97,226,150,111,63,176,7,115,210])},function(e,t){e.exports=new Uint8Array([29,170,78,9,161,89,237,197,6,192,136,50,78,118,10,229,153,202,119,131,28,240,202,24,183,200,126,100,109,35,68,252,18,221,193,3,33,156,19,107,141,245,154,252,183,12,7,170,248,90,132,98,34,186,244,246,74,149,104,246,249,66,91,165,10,189,75,130,206,157,113,50,156,150,107,216,149,255,22,107,250,250,215,108,156,32,21,203,23,84,126,19,201,43,55,114])},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=n(12),a=n.n(o),s=(n(19),n(1)),u=n(2),l=n(4),c=n(3),f=n(5),p=n(9),h=n.n(p),d=n(13),m=new(n.n(d).a)({hotword:null,sensitivity:.1});h.a.setWorkers({espeak:"webworkers/espeak-en-worker.js",sam:"webworkers/sam-worker.js"});var g=new h.a({language:"en",profile:"Jack"}),w=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(c.a)(t).call(this))).state={hotwords:["bumblebee","caterpillar","christina","dragonfly","francesca","grasshopper","porcupine","terminator"],bumblebee_started:!1,spokenHotwords:[],selectedHotword:null,sensivitiyChanged:!1,sensitivity:.1,action:"texttospeech"},e.sounds={bumblebee:new Audio("sounds/bumblebee.mp3"),caterpillar:new Audio("sounds/caterpillar.mp3"),christina:new Audio("sounds/christina.mp3"),dragonfly:new Audio("sounds/dragonfly.mp3"),francesca:new Audio("sounds/francesca.mp3"),grasshopper:new Audio("sounds/grasshopper.mp3"),porcupine:new Audio("sounds/porcupine.mp3"),terminator:new Audio("sounds/terminator.mp3")},m.on("hotword",(function(t){e.recognizeHotword(t)})),e}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){m.setHotword(this.state.selectedHotword)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"App"},"Hotword: ",i.a.createElement("select",{value:this.state.selectedHotword||"",onChange:function(t){return e.changeHotword(t)}},this.renderHotwordOptions()),i.a.createElement("br",null),"Sensitivity: ",i.a.createElement("select",{value:this.state.sensitivity||"",onChange:function(t){return e.changeSensitivity(t)}},this.renderSensitivities()),i.a.createElement("br",null),"Action: ",i.a.createElement("select",{value:this.state.action||"",onChange:function(t){return e.changeAction(t)}},i.a.createElement("option",{value:"sounds"},"Sounds"),i.a.createElement("option",{value:"texttospeech"},"Speech To Text")),i.a.createElement("br",null),i.a.createElement("button",{onClick:function(t){return e.toggleHotword()}},this.state.bumblebee_started?"Stop":"Start"),this.renderSay(),this.renderBumblebees())}},{key:"renderSay",value:function(){if(this.state.bumblebee_started)return this.state.selectedHotword?i.a.createElement("h3",null,'Say "',this.state.selectedHotword,'":'):i.a.createElement("h4",null,"Say any of the following: ",this.state.hotwords.join(", "),":")}},{key:"renderHotwordOptions",value:function(){var e=this.state.hotwords.map((function(e,t){return i.a.createElement("option",{key:t,value:e},e)}));return e.unshift(i.a.createElement("option",{key:"null",value:""},"* Any *")),e}},{key:"renderSensitivities",value:function(e){for(var t=[],n=0;n<=10;n++){var r=n/10,o=10*n;t.push(i.a.createElement("option",{key:n,value:r},o,"%"))}return t}},{key:"changeAction",value:function(e){var t=e.target.options[e.target.selectedIndex].value;this.setState({action:t})}},{key:"changeSensitivity",value:function(e){var t=e.target.options[e.target.selectedIndex].value;this.state.sensivitiyChanged?alert("Sensitivity can only be set before .start(), reload and try again"):(this.setState({sensitivity:t}),m.setSensitivity(t))}},{key:"changeHotword",value:function(e){var t=e.target.options[e.target.selectedIndex].value;m.setHotword(t),this.setState({selectedHotword:t,spokenHotwords:[]})}},{key:"toggleHotword",value:function(){var e=this.state.selectedHotword;this.state.bumblebee_started?(m.stop(),this.setState({bumblebee_started:!1,spokenHotwords:[]})):(console.log("starting",e),this.setState({bumblebee_started:!0,spokenHotwords:[],sensivitiyChanged:!0}),m.start())}},{key:"recognizeHotword",value:function(e){if(e!==this.state.selectedHotword&&this.state.selectedHotword)console.log("did not recognize",e);else{"sounds"===this.state.action?this.sounds[e].play():"texttospeech"===this.state.action&&g.say(e+"detected");var t=this.state.spokenHotwords;t.push(e),console.log("recognized hotword",e),this.setState({spokenHotwords:t})}}},{key:"renderBumblebees",value:function(){var e=this.state.spokenHotwords.map((function(e,t){return i.a.createElement("li",{key:t},e)}));return i.a.createElement("ul",null,e)}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(2),o=n(4),a=n(3),s=n(5),u=n(6),c=n.n(u),f=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(o.a)(this,Object(a.a)(t).call(this)))._queue=[],n.speaker=e,n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"clearQueue",value:function(){this._queue=[]}},{key:"queue",value:function(e){this._queue.push(e),this._speakNext()}},{key:"_speakNext",value:function(){var e=this;if(!this.isSpeaking){var t=this._queue.shift();t?(this.isSpeaking=!0,this.speaker.getWorkerAudioData(t.text,t.options,(function(n,r){t.onStart&&t.onStart(t),t.scope.loadAudioData(n,r,(function(){t.onStop&&setTimeout((function(){t.onStop(t)}),1),e._onEnded()}))}))):this.emit("finish")}}},{key:"_onEnded",value:function(){this.isSpeaking=!1,this._speakNext()}}]),t}(c.a),p=n(7),h=n.n(p),d=n(8),m=function(e){function t(e,n){var i;return Object(r.a)(this,t),n||(n={}),(i=Object(o.a)(this,Object(a.a)(t).call(this))).canvas=e,i.width=i.canvas.width,i.height=i.canvas.height,i.audioContext=null,i.meter=null,i.mediaStreamSource=null,i._draw=i.draw.bind(Object(d.a)(i)),i.isRecording=!1,i.setTheme({lineWidth:n.lineWidth||3,strokeColor:n.strokeColor||"#FF0000",clipColor:n.clipColor||n.strokeColor||"#FF0000",fillColor:n.fillColor||"rgba(255,0,0,0.1)",bgOnColor:n.bgOnColor||null,bgOffColor:n.bgOffColor||null,dotColor:n.dotColor||"#FF0000",dotSize:n.dotSize||3,background:n.background||null}),i}return Object(s.a)(t,e),Object(i.a)(t,[{key:"setTheme",value:function(e){this.theme=e,this.draw()}},{key:"createAudioMeter",value:function(e,t,n,r){var i=e.createScriptProcessor(512);return i.onaudioprocess=function(e){for(var t,n=e.inputBuffer.getChannelData(0),r=n.length,i=0,o=0;o<r;o++)t=n[o],Math.abs(t)>=this.clipLevel&&(this.clipping=!0,this.lastClip=window.performance.now()),i+=t*t;var a=Math.sqrt(i/r);this.volume=Math.max(a,this.volume*this.averaging),this.maxVolume||(this.maxVolume=this.volume),this.maxVolume=Math.max(this.volume,this.maxVolume)},i.clipping=!1,i.lastClip=0,i.volume=0,i.clipLevel=t||.99,i.averaging=n||.97,i.clipLag=r||500,i.connect(e.destination),i.checkClipping=function(){return!!this.clipping&&(this.lastClip+this.clipLag<window.performance.now()&&(this.clipping=!1),this.clipping)},i.shutdown=function(){this.disconnect(),this.onaudioprocess=null},i}},{key:"setIsRecording",value:function(e){this.isRecording!==e?(this.isRecording=e,e?this.startRecording():this.stopRecording()):console.log("same")}},{key:"stopRecording",value:function(){this.isRecording&&(this.mediaStreamSource&&this.meter&&this.mediaStreamSource.disconnect(this.meter),this.meter&&this.meter.shutdown(),this.audioContext&&this.audioContext.close()),this.isRecording=!1,this.isDrawing=!1}},{key:"requestMic",value:function(){var e=this;this.startRecording((function(){e.stopRecording()}),(function(){e.stopRecording()}))}},{key:"startRecording",value:function(e,t){var n=this;if(this.isRecording)console.log("already recording");else{console.log("startRecording"),this.isRecording=!0;var r=new(window.AudioContext||window.webkitAudioContext);this.audioContext=r;var i=function(i){if(console.log("startRecording success"),n.audioContext)try{n.mediaStreamSource=r.createMediaStreamSource(i),n.meter=n.createAudioMeter(r),n.mediaStreamSource.connect(n.meter),n.startDrawing(),e&&e()}catch(o){t&&t()}},o=function(e){console.log("startRecording fail"),t&&t()};try{if(navigator.getUserMedia)navigator.getUserMedia({audio:{mandatory:{googEchoCancellation:"false",googAutoGainControl:"false",googNoiseSuppression:"false",googHighpassFilter:"false"},optional:[]}},i,o);else{if(!navigator.mediaDevices.getUserMedia)throw new Error("no getUserMedia");navigator.mediaDevices.getUserMedia({audio:{mandatory:{googEchoCancellation:"false",googAutoGainControl:"false",googNoiseSuppression:"false",googHighpassFilter:"false"},optional:[]}},i,o)}}catch(a){alert("getUserMedia threw exception :"+a)}}}},{key:"loadAudioData",value:function(e,t,n){var r=this;this.audioContext=e,this.source=t,t.connect(e.destination);var i=this.createAudioMeter(e);this.meter=i,t.connect(this.meter),t.onended=function(){r.isPlaying=!1,t.disconnect(),delete t.buffer,t.stop(),r.stopDrawing(),e.close(),n&&n()},this.isPlaying=!0,this.startDrawing(),t.start(0)}},{key:"startDrawing",value:function(){this.isDrawing=!0,this.draw()}},{key:"stopDrawing",value:function(){this.meter.volume=0,this.draw(),this.isDrawing=!1}},{key:"draw",value:function(){if(this.canvas){var e=this.canvas.getContext("2d");if(this.theme.background?(e.fillStyle=this.theme.background,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height),this.theme.bgOnColor||this.theme.bgOffColor){var t=Math.min(this.width,this.height)/2-e.lineWidth;e.beginPath(),e.arc(this.width/2,this.height/2,t,0,2*Math.PI,!1),e.fillStyle=this.isPlaying||this.isRecording?this.theme.bgOnColor:this.theme.bgOffColor,e.fill(),e.closePath()}if(e.lineWidth=this.theme.lineWidth,this.theme.dotSize){var n=this.theme.dotSize;e.beginPath(),e.arc(this.width/2,this.height/2,n,0,2*Math.PI,!1),e.fillStyle=this.theme.dotColor,e.fill(),e.closePath()}if(this.isRecording||this.isDrawing){if(!this.meter)return void console.error("no meter");e.strokeStyle=this.meter.checkClipping()?this.theme.clipColor:this.theme.strokeColor;var r=Math.min(this.width,this.height)/2-e.lineWidth,i=this.meter.volume*r*5;i>this.width/2-this.theme.lineWidth&&(i=this.width/2-this.theme.lineWidth),e.beginPath(),e.arc(this.width/2,this.height/2,i,0,2*Math.PI,!1),this.theme.fillColor&&(e.fillStyle=this.theme.fillColor,e.fill()),e.stroke(),e.closePath(),this.isDrawing&&window.requestAnimationFrame(this._draw)}else console.log("not drawing")}else console.log("no canvas")}}]),t}(c.a);n.d(t,"MonauralScope",(function(){return m}));var g=function(e){function t(e){var n;for(var i in Object(r.a)(this,t),e||(e={}),(n=Object(o.a)(this,Object(a.a)(t).call(this))).lang=null,n.profiles={},n.defaultProfile=null,h.a)n.addProfile(h.a[i]);return e.profile?n.setProfile(e.profile):n.setProfile("Jack"),"espeak"===n.profile.engine&&e.language&&n.setLanguage(e.language),n.lang||n.setLanguage("en_us"),e.visualizer&&n.setVisualizer(e.visualizer),n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"setVisualizer",value:function(e){this.visualizer=e}},{key:"setLanguage",value:function(e){this.lang=t.getLanguageId(e)}},{key:"processOptions",value:function(e){e||(e={});var n=e.profile?e.profile:this.defaultProfile,r=this.profiles[n].default,i=Object.assign({},r);return e.slow&&(i.speed=this.profiles[n].slow.speed),e.fast&&(i.speed=this.profiles[n].fast.speed),e.low&&(i.pitch=this.profiles[n].low.pitch),e.high&&(i.pitch=this.profiles[n].high.pitch),e.pitch&&(i.pitch=this.profiles[n].pitch.pitch),e.speed&&(i.speed=this.profiles[n].speed.speed),e.language?i.voice=t.getLanguageId(e.language):i.voice=this.lang,e.delay&&(i.delay=e.delay),i}},{key:"say",value:function(e,t){var n=this;return t=t||{},this.visualizer?new Promise((function(r){n.getWorkerAudioData(e,t,(function(e,t){n.visualizer.loadAudioData(e,t,r)}))})):new Promise((function(r){n.getWorkerAudioData(e,t,(function(e,t){t.connect(e.destination),t.onended=function(){t.connect(e.destination),e.close(),r()},t.start(0)}))}))}},{key:"getWorkerAudioData",value:function(e,n,r){e=e.toLowerCase(),n.profile||(n.profile=this.defaultProfile||"Jack");var i,o=this.profiles[n.profile].engine;if("sam"===o)i=t.workers.sam;else if("espeak"===o)if("string"===typeof t.workers.espeak)i=t.workers.espeak;else if(t.workers.espeak.length){var a=n.language;a.startsWith("en-")&&(a="en/"+l);for(var s=0;s<t.workers.espeak.length;s++)if(t.workers.espeak[s].language===a){i=t.workers.espeak[s].path;break}}if(!i)throw new Error("no worker path for this language");var u=new Worker(i);u.addEventListener("message",(function(e){if(console.log("received from worker:",e.data),e.data.rawdata){var t;if(window.AudioContext)t=new window.AudioContext;else{if(!window.webkitAudioContext)throw new Error("no AudioContext");console.log("creating webkitAudioContext"),t=new window.webkitAudioContext}if(!t)return void console.log("no audioContext 2");if(!t.createBufferSource)return void console.log("no createBufferSource");var n=t.createBufferSource();if("sam"===o){for(var i=e.data.rawdata,a=t.createBuffer(1,i.length,22050),s=a.getChannelData(0),u=0;u<i.length;u++)s[u]=i[u];n.buffer=a,console.log("returning sam"),r(t,n)}else t.decodeAudioData(e.data.rawdata,(function(e){n.buffer=e,console.log("returning espeak"),r(t,n)}),(function(e){console.log("error",e)}))}}),!1);var c=this.processOptions(n);u.postMessage({cmd:"speak",text:e,options:c})}},{key:"replacementsFor",value:function(e,t){return t.forEach((function(t){var n=t[0],r=t[1];e=e.replace(new RegExp(n,"gi"),r)})),e}},{key:"addProfile",value:function(e){["high","low","fast","slow"].forEach((function(t){if("default"!==t&&"name"!==t){var n=Object.assign({},e.default);for(var r in e[t])n[r]=e[t][r];e[t]=n}})),this.profiles[e.name]=e}},{key:"setProfile",value:function(e){return this.defaultProfile=e,this.profile=h.a[e],this}}]),t}(c.a);g.variants=["f1","f2","f3","f4","f5","m1","m2","m3","m4","m5","m6","m7","croak","klatt","klatt2","klatt3","whisper","whisperf"],g.profiles=h.a,g.languageIds={ca:"Catalan",cs:"Czech",de:"German",el:"Greek","en/en":"English","en/en-n":"English (N)","en/en-rp":"English (RP)","en/en-sc":"English (Scottish)","en/en-us":"English (US)","en/en-wm":"English (WM)",eo:"Esperanto",es:"Spanish","es-la":"Spanish (Latin America)",fi:"Finnish",fr:"French",hu:"Hungarian",it:"Italian",kn:"Kannada",la:"Latin",lv:"Latvian",nl:"Dutch",pl:"Polish",pt:"Portuguese (Brazil)","pt-pt":"Portuguese, European",ro:"Romanian",sk:"Slovak",sv:"Swedish",tr:"Turkish",zh:"Chinese (Mandarin)","zh-yue":"Chinese (Cantonese)"},g.getLanguageId=function(e){return e.indexOf("_")>-1&&(e=e.replace("_","-")),e.startsWith("en")&&-1===e.indexOf("/")&&(e="en/"+e),e},g.addProfile=function(e){for(var t in e)g.profiles[t]=e[t]},g.setWorkers=function(e){g.workers=e};var w=new f(new g);g.queue=w.queue.bind(w),g.clearQueue=w.clearQueue.bind(w),g.on=w.on.bind(w),g.once=w.once.bind(w);t.default=g}],[[14,1,2]]]);
//# sourceMappingURL=main.611b4402.chunk.js.map