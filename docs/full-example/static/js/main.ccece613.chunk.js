(this["webpackJsonpbumblebee-full-example"]=this["webpackJsonpbumblebee-full-example"]||[]).push([[0],{12:function(e,t,s){},29:function(e,t,s){"use strict";s.r(t);var o=s(0),n=s.n(o),a=s(6),r=s.n(a),i=(s(12),s(3)),l=s.n(i),d=s(4);const u=new(s.n(d).a);u.setWorkersPath("./bumblebee-workers"),u.addHotword("bumblebee"),u.addHotword("grasshopper"),u.addHotword("hey_edison"),u.addHotword("porcupine"),u.addHotword("terminator"),u.addHotword("blueberry"),u.addHotword("white_smoke"),u.setHotword("bumblebee"),l.a.setWorkers({espeak:"webworkers/espeak-en-worker.js"});var c=new l.a({language:"en",profile:"Jack"});class h extends o.Component{constructor(){super(),this.state={hotwords:Object.keys(u.hotwords),bumblebee_started:!1,spokenHotwords:[],selectedHotword:null,sensivitiyChanged:!1,sensitivity:.5,action:"sounds",muted:!1},this.sounds={bumblebee:new Audio("sounds/bumblebee-on.mp3"),hey_edison:new Audio("sounds/hey_edison.mp3"),grasshopper:new Audio("sounds/grasshopper.mp3"),porcupine:new Audio("sounds/porcupine.mp3"),terminator:new Audio("sounds/terminator.mp3"),blueberry:new Audio("sounds/blueberry.mp3"),white_smoke:new Audio("sounds/white_smoke.mp3")},u.on("hotword",e=>{this.recognizeHotword(e)}),u.on("data",(e,t,s,o)=>{o&&console.log("data",e,t,s,o)})}componentDidMount(){u.setHotword(this.state.selectedHotword),u.on("analyser",e=>{console.log("analyser",e);var t=document.getElementById("oscilloscope");this.analyser=new d.SpectrumAnalyser(e,t),this.state.muted&&(u.setMuted(!0),this.analyser.setMuted(!0)),this.analyser.start()})}render(){return n.a.createElement("div",{className:"App"},"Hotword: ",n.a.createElement("select",{value:this.state.selectedHotword||"",onChange:e=>this.changeHotword(e)},this.renderHotwordOptions()),n.a.createElement("br",null),"Sensitivity: ",n.a.createElement("select",{value:this.state.sensitivity||"",onChange:e=>this.changeSensitivity(e)},this.renderSensitivities()),n.a.createElement("br",null),"Action: ",n.a.createElement("select",{value:this.state.action||"",onChange:e=>this.changeAction(e)},n.a.createElement("option",{value:"sounds"},"Sounds"),n.a.createElement("option",{value:"texttospeech"},"Speech To Text")),n.a.createElement("br",null),n.a.createElement("button",{onClick:e=>this.toggleHotword()},this.state.bumblebee_started?"Stop":"Start"),n.a.createElement("button",{onClick:e=>this.toggleMuted()},this.state.muted?"Unmute":"Mute"),n.a.createElement("br",null),n.a.createElement("canvas",{id:"oscilloscope",width:"800",height:"100"}),this.renderSay(),this.renderBumblebees())}renderSay(){if(this.state.bumblebee_started)return this.state.selectedHotword?n.a.createElement("h3",null,'Say "',this.state.selectedHotword,'":'):n.a.createElement("h4",null,"Say any of the following: ",this.state.hotwords.join(", "),":")}renderHotwordOptions(){let e=this.state.hotwords.map((e,t)=>n.a.createElement("option",{key:t,value:e},e));return e.unshift(n.a.createElement("option",{key:"null",value:""},"* Any *")),e}renderSensitivities(e){let t=[];for(let s=0;s<=10;s++){let e=s/10,o=10*s;t.push(n.a.createElement("option",{key:s,value:e},o,"%"))}return t}changeAction(e){let t=e.target.options[e.target.selectedIndex].value;this.setState({action:t})}changeSensitivity(e){let t=e.target.options[e.target.selectedIndex].value;this.state.sensivitiyChanged?alert("Sensitivity can only be set before .start(), reload and try again"):(this.setState({sensitivity:t}),u.setSensitivity(t))}changeHotword(e){let t=e.target.options[e.target.selectedIndex].value;u.setHotword(t),this.setState({selectedHotword:t,spokenHotwords:[]})}toggleHotword(){let e=this.state.selectedHotword;this.state.bumblebee_started?(u.stop(),this.setState({bumblebee_started:!1,spokenHotwords:[]})):(console.log("starting",e),this.setState({bumblebee_started:!0,spokenHotwords:[],sensivitiyChanged:!0}),u.start())}toggleMuted(){const e=!this.state.muted;this.setState({muted:e},()=>{u.setMuted(e),this.analyser&&this.analyser.setMuted(e)})}recognizeHotword(e){if(e!==this.state.selectedHotword&&this.state.selectedHotword)console.log("did not recognize",e);else{"sounds"===this.state.action?this.sounds[e]&&this.sounds[e].play():"texttospeech"===this.state.action&&c.say(e+"detected");const t=this.state.spokenHotwords;t.push(e),console.log("recognized hotword",e),this.setState({spokenHotwords:t})}}renderBumblebees(){let e=this.state.spokenHotwords.map((e,t)=>n.a.createElement("li",{key:t},e));return n.a.createElement("ul",null,e)}}var m=h;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(m,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},7:function(e,t,s){e.exports=s(29)}},[[7,1,2]]]);
//# sourceMappingURL=main.ccece613.chunk.js.map