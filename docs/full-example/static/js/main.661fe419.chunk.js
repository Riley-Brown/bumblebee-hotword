(this["webpackJsonpbumblebee-full-example"]=this["webpackJsonpbumblebee-full-example"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,o){var n=o(22),s=o(23),r=o(24),a=o(26),i=o(12),c=o(27),u=o(6),l=o(29),d=o(30),h=function(e){"use strict";function t(){var e;return n(this,t),(e=r(this,a(t).call(this))).hotword=null,e.hotwords={},e.setSensitivity(.5),e.setWorkersPath("/"),e.setVoiceProcessor(d),e._detectionCallback=e.detectionCallback.bind(i(e)),e._errorCallback=e.errorCallback.bind(i(e)),e._audioProcessCallback=e.audioProcessCallback.bind(i(e)),e}return c(t,e),s(t,[{key:"setVoiceProcessor",value:function(e){this.webVoiceProcessor=e}},{key:"addHotword",value:function(e,t,o){this.hotwords[e]={data:t,sensitivity:o||this.defaultSensitivity}}},{key:"setHotword",value:function(e){if(null===e||""===e)this.hotword=null;else{if(!(Object.keys(this.hotwords).indexOf(e)>-1))throw new Error("invalid hotword");this.hotword=e}}},{key:"setSensitivity",value:function(e){this.defaultSensitivity=e}},{key:"stop",value:function(){this.porcupineManager.stop(),this.started=!1}},{key:"setWorkersPath",value:function(e){this.webWorkersPath=e}},{key:"detectionCallback",value:function(e){e&&(console.log("bumblebee keyword",e),null===this.hotword||e===this.hotword?this.emit("hotword",e):console.log("wrong hotword:",e))}},{key:"errorCallback",value:function(e){this.emit("error",e)}},{key:"audioProcessCallback",value:function(e){this.emit("data",e)}},{key:"start",value:function(){if(!this.started){this.started=!0,this.porcupineManager=l(this.webVoiceProcessor,this.webWorkersPath+"/porcupine_worker.js",this.webWorkersPath+"/downsampling_worker.js");var e={},t=[];for(var o in this.hotwords){var n=this.hotwords[o];e[o]=n.data,t.push(n.sensitivity)}this.porcupineManager.start(e,new Float32Array(t),this._detectionCallback,this._errorCallback,this._audioProcessCallback)}}}]),t}(u);e.exports=h},function(e,t,o){e.exports=o(37)},,,,,function(e,t,o){},,,,,,,,,function(e,t){e.exports=function(e,t,o){var n;return{start:function(s,r,a,i,c){(n=new Worker(t)).postMessage({command:"init",keywordIDs:s,sensitivities:r}),n.onmessage=function(e){a(e.data.keyword)},e.start([this],o,i,c)},processFrame:function(e){n.postMessage({command:"process",inputFrame:e})},stop:function(){e.stop(),n.postMessage({command:"release"})}}}},function(e,t){var o,n=!1;e.exports={start:function(e,t,s,r){o||navigator.mediaDevices.getUserMedia({audio:!0}).then((function(s){var a=new(window.AudioContext||window.webkitAudioContext),i=a.createMediaStreamSource(s),c=a.createScriptProcessor(4096,1,1);c.onaudioprocess=function(e){n&&o.postMessage({command:"process",inputFrame:e.inputBuffer.getChannelData(0)})},i.connect(c),c.connect(a.destination),(o=new Worker(t)).postMessage({command:"init",inputSampleRate:i.context.sampleRate}),o.onmessage=function(t){e.forEach((function(e){e.processFrame(t.data)})),r&&r(t.data)}})).catch(s),n=!0},stop:function(){n=!1,o.postMessage({command:"reset"})}}},function(e,t){e.exports=new Uint8Array([140,20,139,111,75,233,106,137,144,225,192,133,238,96,238,92,238,77,124,58,215,21,175,49,127,74,52,213,106,111,236,227,15,116,168,49,25,247,70,183,184,63,166,55,113,59,20,242,220,165,61,139,6,132,219,145,71,186,73,108,204,114,81,20,173,53,233,81,39,112,154,74,124,38,52,44,103,80,171,64,246,219,196,149,250,86,199,18,85,196,46,148])},function(e,t){e.exports=new Uint8Array([63,248,199,1,109,188,92,184,74,145,14,22,249,165,250,179,207,178,252,133,86,172,230,209,98,241,143,227,200,83,60,167,45,13,95,90,213,80,112,255,65,225,156,169,157,118,148,239,165,208,231,177,62,45,149,9,59,64,139,235,98,25,229,88,181,113,42,199,112,77,58,240,149,86,90,227,52,64,191,20,105,148,239,171,232,140,108,207,85,184,139,140,149,90,224,129])},function(e,t){e.exports=new Uint8Array([105,69,143,223,200,90,236,178,53,186,112,1,230,239,211,95,128,49,177,144,54,213,58,205,94,36,172,243,234,84,68,102,34,225,183,184,20,252,163,212,29,115,74,102,176,170,244,132,226,77,131,75,93,209,186,12,32,161,150,39,59,106,156,83,18,73,194,32,243,78,173,141,73,3,23,188,39,83,237,173,41,255,104,235,182,11,147,70,210,18,207,32])},function(e,t){e.exports=new Uint8Array([141,79,23,119,186,166,54,242,32,198,156,106,85,144,162,180,200,158,73,76,215,80,192,250,113,157,118,40,73,11,45,237,135,229,8,120,190,205,55,228,64,21,161,93,247,158,240,49,61,220,151,240,45,226,237,13,142,208,244,50,134,90,193,131,66,124,41,29,103,3,26,24,130,104,28,95,242,0,100,108,4,122,180,141,153,142,89,116,25,200,144,72,49,136,201,9])},function(e,t){e.exports=new Uint8Array([182,182,228,225,214,60,163,39,189,99,130,22,200,205,11,116,209,231,163,158,236,230,42,62,120,46,115,253,67,24,5,23,51,7,82,8,122,47,50,68,25,74,153,130,181,254,180,241,115,233,201,172,82,170,53,141,208,81,50,236,244,12,227,166,185,237,78,31,137,77,23,70,32,233,186,71,88,73,159,180,27,58,246,244,124,36,48,89,246,46,206,38])},,function(e,t,o){"use strict";o.r(t);var n=o(0),s=o.n(n),r=o(13),a=o.n(r),i=(o(20),o(1)),c=o(2),u=o(4),l=o(3),d=o(5),h=o(10),p=o.n(h),w=o(14),m=new(o.n(w).a);m.setWorkersPath("./bumblebee-workers"),m.addHotword("bumblebee",o(31)),m.addHotword("grasshopper",o(32)),m.addHotword("hey_edison",o(33)),m.addHotword("porcupine",o(34)),m.addHotword("terminator",o(35)),m.setHotword("bumblebee"),p.a.setWorkers({espeak:"webworkers/espeak-en-worker.js"});var b=new p.a({language:"en",profile:"Jack"}),v=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).state={hotwords:Object.keys(m.hotwords),bumblebee_started:!1,spokenHotwords:[],selectedHotword:null,sensivitiyChanged:!1,sensitivity:.5,action:"texttospeech"},e.sounds={bumblebee:new Audio("sounds/bumblebee.mp3"),caterpillar:new Audio("sounds/caterpillar.mp3"),christina:new Audio("sounds/christina.mp3"),dragonfly:new Audio("sounds/dragonfly.mp3"),francesca:new Audio("sounds/francesca.mp3"),grasshopper:new Audio("sounds/grasshopper.mp3"),porcupine:new Audio("sounds/porcupine.mp3"),terminator:new Audio("sounds/terminator.mp3")},m.on("hotword",(function(t){e.recognizeHotword(t)})),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){m.setHotword(this.state.selectedHotword)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},"Hotword: ",s.a.createElement("select",{value:this.state.selectedHotword||"",onChange:function(t){return e.changeHotword(t)}},this.renderHotwordOptions()),s.a.createElement("br",null),"Sensitivity: ",s.a.createElement("select",{value:this.state.sensitivity||"",onChange:function(t){return e.changeSensitivity(t)}},this.renderSensitivities()),s.a.createElement("br",null),"Action: ",s.a.createElement("select",{value:this.state.action||"",onChange:function(t){return e.changeAction(t)}},s.a.createElement("option",{value:"sounds"},"Sounds"),s.a.createElement("option",{value:"texttospeech"},"Speech To Text")),s.a.createElement("br",null),s.a.createElement("button",{onClick:function(t){return e.toggleHotword()}},this.state.bumblebee_started?"Stop":"Start"),this.renderSay(),this.renderBumblebees())}},{key:"renderSay",value:function(){if(this.state.bumblebee_started)return this.state.selectedHotword?s.a.createElement("h3",null,'Say "',this.state.selectedHotword,'":'):s.a.createElement("h4",null,"Say any of the following: ",this.state.hotwords.join(", "),":")}},{key:"renderHotwordOptions",value:function(){var e=this.state.hotwords.map((function(e,t){return s.a.createElement("option",{key:t,value:e},e)}));return e.unshift(s.a.createElement("option",{key:"null",value:""},"* Any *")),e}},{key:"renderSensitivities",value:function(e){for(var t=[],o=0;o<=10;o++){var n=o/10,r=10*o;t.push(s.a.createElement("option",{key:o,value:n},r,"%"))}return t}},{key:"changeAction",value:function(e){var t=e.target.options[e.target.selectedIndex].value;this.setState({action:t})}},{key:"changeSensitivity",value:function(e){var t=e.target.options[e.target.selectedIndex].value;this.state.sensivitiyChanged?alert("Sensitivity can only be set before .start(), reload and try again"):(this.setState({sensitivity:t}),m.setSensitivity(t))}},{key:"changeHotword",value:function(e){var t=e.target.options[e.target.selectedIndex].value;m.setHotword(t),this.setState({selectedHotword:t,spokenHotwords:[]})}},{key:"toggleHotword",value:function(){var e=this.state.selectedHotword;this.state.bumblebee_started?(m.stop(),this.setState({bumblebee_started:!1,spokenHotwords:[]})):(console.log("starting",e),this.setState({bumblebee_started:!0,spokenHotwords:[],sensivitiyChanged:!0}),m.start())}},{key:"recognizeHotword",value:function(e){if(e!==this.state.selectedHotword&&this.state.selectedHotword)console.log("did not recognize",e);else{"sounds"===this.state.action?this.sounds[e].play():"texttospeech"===this.state.action&&b.say(e+"detected");var t=this.state.spokenHotwords;t.push(e),console.log("recognized hotword",e),this.setState({spokenHotwords:t})}}},{key:"renderBumblebees",value:function(){var e=this.state.spokenHotwords.map((function(e,t){return s.a.createElement("li",{key:t},e)}));return s.a.createElement("ul",null,e)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(s.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[15,1,2]]]);
//# sourceMappingURL=main.661fe419.chunk.js.map