{"version":3,"sources":["../../../lib/bumblebee.js","../../../lib/porcupine_manager.js","../../../lib/web-voice-processor.js","../../../hotwords/bumblebee.js","../../../hotwords/grasshopper.js","../../../hotwords/hey_edison.js","../../../hotwords/porcupine.js","../../../hotwords/terminator.js","BumbleBeeApp.js","serviceWorker.js","index.js"],"names":["EventEmitter","require","PorcupineManager","webVoiceProcessor","BumbleBee","hotword","hotwords","setSensitivity","setWorkersPath","setVoiceProcessor","_detectionCallback","detectionCallback","bind","_errorCallback","errorCallback","_audioProcessCallback","audioProcessCallback","proc","this","name","data","sensitivity","defaultSensitivity","w","Object","keys","indexOf","Error","s","porcupineManager","stop","started","path","webWorkersPath","keyword","console","log","emit","e","keywordIDs","sensitivities","id","h","push","start","Float32Array","module","exports","porcupineWorkerScript","downsamplingScript","porcupineWorker","Worker","postMessage","command","onmessage","processFrame","frame","inputFrame","downsampler","isRecording","engines","downsamplerScript","navigator","mediaDevices","getUserMedia","audio","then","stream","audioContext","window","AudioContext","webkitAudioContext","audioSource","createMediaStreamSource","node","createScriptProcessor","onaudioprocess","inputBuffer","getChannelData","connect","destination","inputSampleRate","context","sampleRate","forEach","engine","catch","Uint8Array","bumblebee","addHotword","setHotword","Say","setWorkers","voice","language","profile","BumbleBeeApp","state","bumblebee_started","spokenHotwords","selectedHotword","sensivitiyChanged","action","sounds","Audio","caterpillar","christina","dragonfly","francesca","grasshopper","porcupine","terminator","on","word","recognizeHotword","className","value","onChange","changeHotword","renderHotwordOptions","changeSensitivity","renderSensitivities","changeAction","onClick","toggleHotword","renderSay","renderBumblebees","join","map","i","key","unshift","n","p","target","options","selectedIndex","setState","alert","play","say","b","Component","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2f0d8ef8.chunk.js","sourcesContent":["const EventEmitter = require('events');\nconst PorcupineManager = require('./porcupine_manager');\nconst webVoiceProcessor = require('./web-voice-processor');\n\nclass BumbleBee extends EventEmitter {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.hotword = null;\n\t\tthis.hotwords = {};\n\t\tthis.setSensitivity(0.5);\n\t\tthis.setWorkersPath('/');\n\t\tthis.setVoiceProcessor(webVoiceProcessor);\n\t\tthis._detectionCallback = this.detectionCallback.bind(this);\n\t\tthis._errorCallback = this.errorCallback.bind(this);\n\t\tthis._audioProcessCallback = this.audioProcessCallback.bind(this);\n\t}\n\t\n\tsetVoiceProcessor(proc) {\n\t\tthis.webVoiceProcessor = proc;\n\t}\n\t\n\taddHotword(name, data, sensitivity) {\n\t\tthis.hotwords[name] = {\n\t\t\tdata,\n\t\t\tsensitivity: sensitivity || this.defaultSensitivity\n\t\t};\n\t}\n\t\n\tsetHotword(w) {\n\t\tif (w === null || w === '') {\n\t\t\tthis.hotword = null;\n\t\t}\n\t\telse if (Object.keys(this.hotwords).indexOf(w) > -1) {\n\t\t\tthis.hotword = w;\n\t\t}\n\t\telse {\n\t\t\tthrow new Error('invalid hotword');\n\t\t}\n\t}\n\t\n\tsetSensitivity(s) {\n\t\tthis.defaultSensitivity = s;\n\t}\n\t\n\tstop() {\n\t\tthis.porcupineManager.stop();\n\t\tthis.started = false;\n\t}\n\t\n\tsetWorkersPath(path) {\n\t\tthis.webWorkersPath = path;\n\t}\n\t\n\tdetectionCallback(keyword) {\n\t\tif (keyword) {\n\t\t\tconsole.log('bumblebee keyword', keyword);\n\t\t\tif (this.hotword === null || keyword === this.hotword) {\n\t\t\t\tthis.emit('hotword', keyword);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.log('wrong hotword:', keyword);\n\t\t\t}\n\t\t}\n\t}\n\t\n\terrorCallback(e) {\n\t\tthis.emit('error', e);\n\t}\n\t\n\taudioProcessCallback(data) {\n\t\tthis.emit('data', data);\n\t}\n\t\n\tstart() {\n\t\tif (this.started) return;\n\t\tthis.started = true;\n\t\tthis.porcupineManager = PorcupineManager(\n\t\t\tthis.webVoiceProcessor,\n\t\t\tthis.webWorkersPath+\"/porcupine_worker.js\",\n\t\t\tthis.webWorkersPath+\"/downsampling_worker.js\");\n\t\t\n\t\tlet keywordIDs = {};\n\t\tlet sensitivities = [];\n\t\tfor (let id in this.hotwords) {\n\t\t\tlet h = this.hotwords[id];\n\t\t\tkeywordIDs[id] = h.data;\n\t\t\tsensitivities.push(h.sensitivity);\n\t\t}\n\t\t\n\t\tthis.porcupineManager.start(keywordIDs, new Float32Array(sensitivities), this._detectionCallback, this._errorCallback, this._audioProcessCallback);\n\t}\n}\n\nmodule.exports = BumbleBee;","const PorcupineManager = (function (webVoiceProcessor, porcupineWorkerScript, downsamplingScript) {\n\tlet porcupineWorker;\n\t\n\tlet start = function (keywordIDs, sensitivities, detectionCallback, errorCallback, audioProcessCallback) {\n\t\tporcupineWorker = new Worker(porcupineWorkerScript);\n\t\tporcupineWorker.postMessage({\n\t\t\tcommand: \"init\",\n\t\t\tkeywordIDs: keywordIDs,\n\t\t\tsensitivities: sensitivities\n\t\t});\n\t\t\n\t\tporcupineWorker.onmessage = function (e) {\n\t\t\tdetectionCallback(e.data.keyword);\n\t\t};\n\t\t\n\t\twebVoiceProcessor.start([this], downsamplingScript, errorCallback, audioProcessCallback);\n\t};\n\t\n\tlet stop = function () {\n\t\twebVoiceProcessor.stop();\n\t\tporcupineWorker.postMessage({command: \"release\"});\n\t};\n\t\n\tlet processFrame = function (frame) {\n\t\tporcupineWorker.postMessage({command: \"process\", inputFrame: frame});\n\t};\n\t\n\treturn {start: start, processFrame: processFrame, stop: stop};\n});\n\nmodule.exports = PorcupineManager;","let downsampler;\n\nlet isRecording = false;\n\nlet start = function (engines, downsamplerScript, errorCallback, audioProcessCallback) {\n\tif (!downsampler) {\n\t\tnavigator.mediaDevices.getUserMedia({audio: true})\n\t\t.then(stream => {\n\t\t\tlet audioContext = new (window.AudioContext || window.webkitAudioContext)();\n\t\t\tlet audioSource = audioContext.createMediaStreamSource(stream);\n\t\t\tlet node = audioContext.createScriptProcessor(4096, 1, 1);\n\t\t\tnode.onaudioprocess = function (e) {\n\t\t\t\tif (!isRecording) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdownsampler.postMessage({command: \"process\", inputFrame: e.inputBuffer.getChannelData(0)});\n\t\t\t};\n\t\t\taudioSource.connect(node);\n\t\t\tnode.connect(audioContext.destination);\n\t\t\t\n\t\t\tdownsampler = new Worker(downsamplerScript);\n\t\t\tdownsampler.postMessage({command: \"init\", inputSampleRate: audioSource.context.sampleRate});\n\t\t\tdownsampler.onmessage = function (e) {\n\t\t\t\tengines.forEach(function (engine) {\n\t\t\t\t\tengine.processFrame(e.data);\n\t\t\t\t});\n\t\t\t\tif (audioProcessCallback) {\n\t\t\t\t\taudioProcessCallback(e.data);\n\t\t\t\t}\n\t\t\t};\n\t\t})\n\t\t.catch(errorCallback);\n\t}\n\t\n\tisRecording = true;\n};\n\nlet stop = function () {\n\tisRecording = false;\n\tdownsampler.postMessage({command: \"reset\"});\n};\n\nmodule.exports = {start: start, stop: stop};\n","module.exports = new Uint8Array([\n  0x8c, 0x14, 0x8b, 0x6f, 0x4b, 0xe9, 0x6a, 0x89, 0x90, 0xe1, 0xc0, 0x85,\n  0xee, 0x60, 0xee, 0x5c, 0xee, 0x4d, 0x7c, 0x3a, 0xd7, 0x15, 0xaf, 0x31,\n  0x7f, 0x4a, 0x34, 0xd5, 0x6a, 0x6f, 0xec, 0xe3, 0x0f, 0x74, 0xa8, 0x31,\n  0x19, 0xf7, 0x46, 0xb7, 0xb8, 0x3f, 0xa6, 0x37, 0x71, 0x3b, 0x14, 0xf2,\n  0xdc, 0xa5, 0x3d, 0x8b, 0x06, 0x84, 0xdb, 0x91, 0x47, 0xba, 0x49, 0x6c,\n  0xcc, 0x72, 0x51, 0x14, 0xad, 0x35, 0xe9, 0x51, 0x27, 0x70, 0x9a, 0x4a,\n  0x7c, 0x26, 0x34, 0x2c, 0x67, 0x50, 0xab, 0x40, 0xf6, 0xdb, 0xc4, 0x95,\n  0xfa, 0x56, 0xc7, 0x12, 0x55, 0xc4, 0x2e, 0x94\n]);","module.exports = new Uint8Array([\n  0x3f, 0xf8, 0xc7, 0x01, 0x6d, 0xbc, 0x5c, 0xb8, 0x4a, 0x91, 0x0e, 0x16,\n  0xf9, 0xa5, 0xfa, 0xb3, 0xcf, 0xb2, 0xfc, 0x85, 0x56, 0xac, 0xe6, 0xd1,\n  0x62, 0xf1, 0x8f, 0xe3, 0xc8, 0x53, 0x3c, 0xa7, 0x2d, 0x0d, 0x5f, 0x5a,\n  0xd5, 0x50, 0x70, 0xff, 0x41, 0xe1, 0x9c, 0xa9, 0x9d, 0x76, 0x94, 0xef,\n  0xa5, 0xd0, 0xe7, 0xb1, 0x3e, 0x2d, 0x95, 0x09, 0x3b, 0x40, 0x8b, 0xeb,\n  0x62, 0x19, 0xe5, 0x58, 0xb5, 0x71, 0x2a, 0xc7, 0x70, 0x4d, 0x3a, 0xf0,\n  0x95, 0x56, 0x5a, 0xe3, 0x34, 0x40, 0xbf, 0x14, 0x69, 0x94, 0xef, 0xab,\n  0xe8, 0x8c, 0x6c, 0xcf, 0x55, 0xb8, 0x8b, 0x8c, 0x95, 0x5a, 0xe0, 0x81\n]);","module.exports = new Uint8Array([\n  0x69, 0x45, 0x8f, 0xdf, 0xc8, 0x5a, 0xec, 0xb2, 0x35, 0xba, 0x70, 0x01,\n  0xe6, 0xef, 0xd3, 0x5f, 0x80, 0x31, 0xb1, 0x90, 0x36, 0xd5, 0x3a, 0xcd,\n  0x5e, 0x24, 0xac, 0xf3, 0xea, 0x54, 0x44, 0x66, 0x22, 0xe1, 0xb7, 0xb8,\n  0x14, 0xfc, 0xa3, 0xd4, 0x1d, 0x73, 0x4a, 0x66, 0xb0, 0xaa, 0xf4, 0x84,\n  0xe2, 0x4d, 0x83, 0x4b, 0x5d, 0xd1, 0xba, 0x0c, 0x20, 0xa1, 0x96, 0x27,\n  0x3b, 0x6a, 0x9c, 0x53, 0x12, 0x49, 0xc2, 0x20, 0xf3, 0x4e, 0xad, 0x8d,\n  0x49, 0x03, 0x17, 0xbc, 0x27, 0x53, 0xed, 0xad, 0x29, 0xff, 0x68, 0xeb,\n  0xb6, 0x0b, 0x93, 0x46, 0xd2, 0x12, 0xcf, 0x20\n]);","module.exports = new Uint8Array([\n  0x8d, 0x4f, 0x17, 0x77, 0xba, 0xa6, 0x36, 0xf2, 0x20, 0xc6, 0x9c, 0x6a,\n  0x55, 0x90, 0xa2, 0xb4, 0xc8, 0x9e, 0x49, 0x4c, 0xd7, 0x50, 0xc0, 0xfa,\n  0x71, 0x9d, 0x76, 0x28, 0x49, 0x0b, 0x2d, 0xed, 0x87, 0xe5, 0x08, 0x78,\n  0xbe, 0xcd, 0x37, 0xe4, 0x40, 0x15, 0xa1, 0x5d, 0xf7, 0x9e, 0xf0, 0x31,\n  0x3d, 0xdc, 0x97, 0xf0, 0x2d, 0xe2, 0xed, 0x0d, 0x8e, 0xd0, 0xf4, 0x32,\n  0x86, 0x5a, 0xc1, 0x83, 0x42, 0x7c, 0x29, 0x1d, 0x67, 0x03, 0x1a, 0x18,\n  0x82, 0x68, 0x1c, 0x5f, 0xf2, 0x00, 0x64, 0x6c, 0x04, 0x7a, 0xb4, 0x8d,\n  0x99, 0x8e, 0x59, 0x74, 0x19, 0xc8, 0x90, 0x48, 0x31, 0x88, 0xc9, 0x09\n]);","module.exports = new Uint8Array([\n  0xb6, 0xb6, 0xe4, 0xe1, 0xd6, 0x3c, 0xa3, 0x27, 0xbd, 0x63, 0x82, 0x16,\n  0xc8, 0xcd, 0x0b, 0x74, 0xd1, 0xe7, 0xa3, 0x9e, 0xec, 0xe6, 0x2a, 0x3e,\n  0x78, 0x2e, 0x73, 0xfd, 0x43, 0x18, 0x05, 0x17, 0x33, 0x07, 0x52, 0x08,\n  0x7a, 0x2f, 0x32, 0x44, 0x19, 0x4a, 0x99, 0x82, 0xb5, 0xfe, 0xb4, 0xf1,\n  0x73, 0xe9, 0xc9, 0xac, 0x52, 0xaa, 0x35, 0x8d, 0xd0, 0x51, 0x32, 0xec,\n  0xf4, 0x0c, 0xe3, 0xa6, 0xb9, 0xed, 0x4e, 0x1f, 0x89, 0x4d, 0x17, 0x46,\n  0x20, 0xe9, 0xba, 0x47, 0x58, 0x49, 0x9f, 0xb4, 0x1b, 0x3a, 0xf6, 0xf4,\n  0x7c, 0x24, 0x30, 0x59, 0xf6, 0x2e, 0xce, 0x26\n]);","import React, {Component} from 'react';\nimport Say from 'jaxcore-say';\n\nimport BumbleBee from 'bumblebee-hotword';\n\nconst bumblebee = new BumbleBee();\n\nbumblebee.setWorkersPath('/bumblebee-workers');\n\nbumblebee.addHotword('bumblebee', require('bumblebee-hotword/hotwords/bumblebee'));\nbumblebee.addHotword('grasshopper', require('bumblebee-hotword/hotwords/grasshopper'));\nbumblebee.addHotword('hey_edison', require('bumblebee-hotword/hotwords/hey_edison'));\nbumblebee.addHotword('porcupine', require('bumblebee-hotword/hotwords/porcupine'));\nbumblebee.addHotword('terminator', require('bumblebee-hotword/hotwords/terminator'));\n\nbumblebee.setHotword('bumblebee');\n\nSay.setWorkers({\n\t'espeak': 'webworkers/espeak-en-worker.js'\n});\n\nvar voice = new Say({\n\tlanguage: 'en',\n\tprofile: 'Jack'\n});\n\nclass BumbleBeeApp extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\t\n\t\tthis.state = {\n\t\t\thotwords: Object.keys(bumblebee.hotwords),\n\t\t\tbumblebee_started: false,\n\t\t\tspokenHotwords: [],\n\t\t\tselectedHotword: null,\n\t\t\tsensivitiyChanged: false,\n\t\t\tsensitivity: 0.5,\n\t\t\t// action: 'sounds'\n\t\t\taction: 'texttospeech'\n\t\t};\n\t\t\n\t\tthis.sounds = {\n\t\t\tbumblebee: new Audio('sounds/bumblebee.mp3'),\n\t\t\tcaterpillar: new Audio('sounds/caterpillar.mp3'),\n\t\t\tchristina: new Audio('sounds/christina.mp3'),\n\t\t\tdragonfly: new Audio('sounds/dragonfly.mp3'),\n\t\t\tfrancesca: new Audio('sounds/francesca.mp3'),\n\t\t\tgrasshopper: new Audio('sounds/grasshopper.mp3'),\n\t\t\tporcupine: new Audio('sounds/porcupine.mp3'),\n\t\t\tterminator: new Audio('sounds/terminator.mp3')\n\t\t};\n\t\t\n\t\tbumblebee.on('hotword', (word) => {\n\t\t\tthis.recognizeHotword(word);\n\t\t});\n\t\t\n\t\t// downsampled microphone audio data now available:\n\t\t// bumblebee.on('data', function(data) {\n\t\t// \tconsole.log('audio data:', data);\n\t\t// });\n\t}\n\t\n\tcomponentDidMount() {\n\t\tbumblebee.setHotword(this.state.selectedHotword);\n\t}\n\t\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"App\">\n\t\t\t\t\n\t\t\t\tHotword: <select value={this.state.selectedHotword||''} onChange={e => this.changeHotword(e)}>\n\t\t\t\t\t{ this.renderHotwordOptions() }\n\t\t\t\t</select>\n\t\t\t\t\n\t\t\t\t<br/>\n\t\t\t\t\n\t\t\t\tSensitivity: <select value={this.state.sensitivity||''} onChange={e => this.changeSensitivity(e)}>\n\t\t\t\t\t{ this.renderSensitivities() }\n\t\t\t\t</select>\n\t\t\t\t\n\t\t\t\t<br/>\n\t\t\t\t\n\t\t\t\tAction: <select value={this.state.action||''} onChange={e => this.changeAction(e)}>\n\t\t\t\t\t<option value=\"sounds\">Sounds</option>\n\t\t\t\t\t<option value=\"texttospeech\">Speech To Text</option>\n\t\t\t\t</select>\n\t\t\t\t\n\t\t\t\t<br/>\n\t\t\t\t\n\t\t\t\t<button onClick={e => this.toggleHotword()}>\n\t\t\t\t\t{!this.state.bumblebee_started ? 'Start' : 'Stop'}\n\t\t\t\t</button>\n\t\t\t\t\n\t\t\t\t{this.renderSay()}\n\t\t\t\t\n\t\t\t\t{this.renderBumblebees()}\n\t\t\t\n\t\t\t</div>\n\t\t);\n\t}\n\t\n\trenderSay() {\n\t\tif (!this.state.bumblebee_started) return;\n\t\tif (this.state.selectedHotword) return (<h3>Say \"{this.state.selectedHotword}\":</h3>);\n\t\telse return (<h4>Say any of the following: {this.state.hotwords.join(', ')}:</h4>);\n\t}\n\t\n\trenderHotwordOptions() {\n\t\tlet h = this.state.hotwords.map((hotword,i) => {\n\t\t\treturn (<option key={i} value={hotword}>{hotword}</option>);\n\t\t});\n\t\th.unshift(<option key={'null'} value={''}>* Any *</option>);\n\t\treturn h;\n\t}\n\t\n\trenderSensitivities(e) {\n\t\tlet s = [];\n\t\tfor (let i=0;i<=10;i++) {\n\t\t\tlet n = i / 10; //Math.round(i / 10) / 10:\n\t\t\tlet p = i * 10; //Math.round(i / 10) / 10:\n\t\t\ts.push(<option key={i} value={n}>{p}%</option>);\n\t\t}\n\t\treturn s;\n\t}\n\t\n\tchangeAction(e) {\n\t\tlet action = e.target.options[e.target.selectedIndex].value;\n\t\tthis.setState({\n\t\t\taction\n\t\t});\n\t}\n\t\n\tchangeSensitivity(e) {\n\t\tlet sensitivity = e.target.options[e.target.selectedIndex].value;\n\t\t\n\t\tif (this.state.sensivitiyChanged) {\n\t\t\talert('Sensitivity can only be set before .start(), reload and try again');\n\t\t}\n\t\telse {\n\t\t\tthis.setState({\n\t\t\t\tsensitivity\n\t\t\t});\n\t\t\tbumblebee.setSensitivity(sensitivity);\n\t\t}\n\t}\n\t\n\tchangeHotword(e) {\n\t\tlet selectedHotword = e.target.options[e.target.selectedIndex].value;\n\t\tbumblebee.setHotword(selectedHotword);\n\t\tthis.setState({\n\t\t\tselectedHotword,\n\t\t\tspokenHotwords: []\n\t\t});\n\t}\n\t\n\ttoggleHotword() {\n\t\tlet hotword = this.state.selectedHotword;\n\t\tif (!this.state.bumblebee_started) {\n\t\t\tconsole.log('starting', hotword);\n\t\t\t\n\t\t\tthis.setState({\n\t\t\t\tbumblebee_started: true,\n\t\t\t\tspokenHotwords: [],\n\t\t\t\tsensivitiyChanged: true\n\t\t\t});\n\t\t\t\n\t\t\tbumblebee.start();\n\t\t\t\n\t\t}\n\t\telse {\n\t\t\tbumblebee.stop();\n\t\t\t\n\t\t\tthis.setState({\n\t\t\t\tbumblebee_started: false,\n\t\t\t\tspokenHotwords: []\n\t\t\t});\n\t\t}\n\t}\n\t\n\trecognizeHotword(hotword) {\n\t\tif (hotword === this.state.selectedHotword || !this.state.selectedHotword) {\n\t\t\t\n\t\t\tif (this.state.action === 'sounds') {\n\t\t\t\tthis.sounds[hotword].play();\n\t\t\t}\n\t\t\telse if (this.state.action === 'texttospeech') {\n\t\t\t\tvoice.say(hotword + 'detected');\n\t\t\t}\n\t\t\t\n\t\t\tconst spokenHotwords = this.state.spokenHotwords;\n\t\t\tspokenHotwords.push(hotword);\n\t\t\t\n\t\t\tconsole.log('recognized hotword', hotword);\n\t\t\tthis.setState({\n\t\t\t\tspokenHotwords\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tconsole.log('did not recognize', hotword);\n\t\t}\n\t}\n\t\n\trenderBumblebees() {\n\t\tlet b = this.state.spokenHotwords.map((word,i) => {\n\t\t\treturn (<li key={i}>{word}</li>);\n\t\t});\n\t\treturn (<ul>\n\t\t\t{b}\n\t\t</ul>);\n\t}\n\t\n}\n\nexport default BumbleBeeApp;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport BumbleBeeApp from './BumbleBeeApp';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<BumbleBeeApp />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}